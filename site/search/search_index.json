{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u30fd( \u00b0 \u25bd\u00b0)\u30ce Hi!","text":"<p>\u8fd9\u91cc\u662fXXWZLN's Blog\uff0c\u5076\u5c14\u8bb0\u5f55\u4e9b\u6298\u817e\u540e\u7684\u7ecf\u5386\u548c\u5fc3\u5f97</p> <p>Note</p> <p>\u9010\u6b65\u6574\u7406\u4e0a\u4f20\u7b14\u8bb0ing</p> Phasellus posuere in sem ut cursus <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> Statistics <p>Pages\uff1a{{pages}}  Words\uff1a{{words}} </p> Statistics <p>Pages\uff1a{{pages}}  Words\uff1a{{words}} </p>"},{"location":"notes/CMake/CMake/","title":"CMAKE","text":""},{"location":"notes/CMake/CMake/#cmake_1","title":"CMake \u8fd0\u884c\u6307\u4ee4","text":"<ul> <li> <p>\u9879\u76ee\u6784\u5efa\u548c\u7f16\u8bd1\uff1a</p> </li> <li> <p>\u5728<code>CMakeLists.txt</code>\u76ee\u5f55\u4e0b\u6267\u884c<code>cmake -B build</code>\uff0c\u81ea\u52a8\u6784\u5efabuild\u76ee\u5f55<code>MakeFile</code></p> </li> <li>\u518d\u6267\u884c<code>cmake --build build</code>\u76f4\u63a5\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6</li> <li> <p>Windows \u548c Linux \u76f8\u540c</p> </li> <li> <p><code>-D</code>\u8bbe\u7f6e\u6784\u5efa\u53c2\u6570</p> </li> <li> <p><code>-G</code>\u6307\u5b9a\u60f3\u8981\u7528\u7684\u751f\u6210\u5668</p> </li> </ul> <p></p>"},{"location":"notes/CMake/CMake/#cmake_2","title":"\u7b80\u5355\u7684\u591a\u6587\u4ef6 CMake \u9879\u76ee\u7ec4\u7ec7\u65b9\u5f0f","text":""},{"location":"notes/CMake/CMake/#_1","title":"\u6700\u7b80\u5355\u7684\u4f8b\u5b50","text":"<p>\u8fd9\u4e2a\u4f8b\u5b50\u662f\u4e00\u4e2a\u6807\u51c6\u7684\u591a\u6587\u4ef6\u7684 CMakeLists.txt</p> <pre><code>cmake_minimum_required (VERSION 3.10)\n\nset(CMAKE_CXX_STANDARD 20)\nset(CMAKE_CXX_STANDARD_REQUIRED ON) # if cpp version if wrong, fault\n\nproject (\"test\" LANGUAGES C CXX)\n\n# -----------------------------------optional below-------------------------------------------\nif (PROJECT_BINARY_DIR STREQUAL PROJECT_SOURCE_DIR)\n  message(WARNING \"The binary directory of CMake cannot be the same as source directory!\")\nendif()\n\n# set build type\nif (NOT CMAKE_BUILD_TYPE)\n  set(CMAKE_BUILD_TYPE RELEASE)\nendif()\n\n# handle Windows\nif (WIN32)\n  add_definitions(-DNOMINMAX -D_USE_MATH_DEFINES)\nendif()\n\n# use cache to make build faster\nif (NOT MSVC)\n  find_program(CCACHE_PROGRAM ccache)\n  if (CCACHE_PROGRAM)\n    message(STATUS \"Found CCache: ${CCACHE_PROGRAM}\")\n    set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_PROGRAM})\n    set_property(GLOBAL PROPERTY RULE_LAUNCH_LINK ${CCACHE_PROGRAM})\n  endif()\nendif()\n\n# -----------------------------------optional above-------------------------------------------\n\nfile(GLOB_RECURSE sources CONFIGURE_DEPENDS src/*.cpp)\nfile(GLOB_RECURSE headers CONFIGURE_DEPENDS include/*.h include/*.hpp)\n\nadd_executable (${PROJECT_NAME} ${sources} ${headers})\n\ntarget_include_directories(${PROJECT_NAME} PUBLIC include)\n</code></pre> <p>\u9879\u76ee\u7684\u7ed3\u6784\u662f</p> <pre><code>.\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 include\n\u2502   \u2514\u2500\u2500 hello.h\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 hello.cpp\n    \u2514\u2500\u2500 main.cpp\n</code></pre>"},{"location":"notes/CMake/CMake/#file","title":"\u6587\u4ef6\u7684\u68c0\u7d22 (file)","text":"<p><code>cmake file(GLOB_RECURSE sources CONFIGURE_DEPENDS src/*.cpp) file(GLOB_RECURSE headers CONFIGURE_DEPENDS include/*.h include/*.hpp) add_executable(${PROJECT_NAME} ${sources} ${headers})</code></p> <ul> <li><code>GLOB_RECURSE</code> \u662f\u6307\u5f53\u524d\u6587\u4ef6\u9012\u5f52\u641c\u7d22</li> <li><code>CONFIGURE_DEPENDS</code> \u53c2\u6570\u4f1a\u5728\u6784\u5efa\u65f6\u81ea\u52a8\u66f4\u65b0\u6587\u4ef6\u76ee\u5f55</li> </ul>"},{"location":"notes/CMake/CMake/#set","title":"\u5e38\u7528\u7684\u5c5e\u6027\u8bbe\u7f6e (set)","text":"<ul> <li><code>set (CMAKE_BUILD_TYPE Release/Debug)</code> \u8bbe\u7f6e\u7f16\u8bd1\u6a21\u5f0f</li> <li>\u8def\u5f84\u53d8\u91cf</li> <li><code>CMAKE_CURRENT_SOUCRE_DIR</code> \u5f53\u524d<code>CMakeLists.txt</code>\u76ee\u5f55\u4f4d\u7f6e\uff0c\u6709\u53ef\u80fd\u662f\u5b50\u6a21\u5757\u7684\u76ee\u5f55</li> <li><code>PROJECT_BINARY_DIR</code> \u5f53\u524d\u9879\u76eebuild\u76ee\u5f55</li> <li><code>PROJECT_SOURCE_DIR</code> \u9879\u76eeproject\u6240\u5c5e<code>CMakeLists.txt</code>\u76ee\u5f55\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u662f\u9879\u76ee\u6700\u5916\u5c42\u76ee\u5f55\u7684\u8def\u5f84</li> <li><code>CMAKE_SOURCE_DIR</code> \u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u4f5c\u4e3a\u5b50\u6a21\u5757\u4f7f\u7528</li> </ul> <pre><code>cmake_minimum_required (VERSION 3.8)\n\nset(CMAKE_CXX_STANDARD 20)\nset(CMAKE_CXX_STANDARD_REQUIRED ON) # \u5982\u679cc++\u7248\u672c\u4e0d\u5bf9\uff0c\u7ec8\u6b62\nset(CMAKE_CXX_EXTENSIONS OFF) # \u662f\u5426\u4f7f\u7528\u7f16\u8bd1\u5668\u5939\u5e26\u7684\u4e00\u4e9b\u79c1\u6d3b\n\nproject (\"helloworld\" LANGUAGES CXX C VERSION 1.1.2) # \u7f16\u8bd1\u8bed\u8a00\u3001\u9879\u76ee\u7248\u672c\n</code></pre>"},{"location":"notes/CMake/CMake/#set_target_properties","title":"\u5e38\u7528\u7684\u5bf9\u8c61\u5c5e\u6027\u8bbe\u7f6e (set_target_properties)","text":"<p>\u8bbe\u7f6e\u5bf9\u8c61\u5c5e\u6027\u4e0d\u540c\u4e8eset\uff0c\u53ea\u8bbe\u7f6e\u6307\u5b9a\u7684\u5bf9\u8c61\uff08\u53ef\u6267\u884c\u5bf9\u8c61\uff0c\u5e93\uff09\uff0c\u800c\u4e0d\u5f71\u54cd\u6574\u4e2a\u9879\u76ee\u3002<code>set_property</code>\u592a\u5570\u55e6\uff0c\u63a8\u8350<code>set_target_properties</code></p> <pre><code>set_target_properties(&lt;target-name&gt; PROPERTIES\n  CXX_STANDARD 17                                         # \u8bbe\u7f6e cpp \u7248\u672c\n  CXX_STANDARD_REQUIRED ON                                # \u5982\u679c\u7248\u672c\u4e0d\u5bf9\u5c31\u7ec8\u6b62\n  WIN32_EXECUTABLE ON                                     # \u5f00\u542f\u540e\u518d Windows \u4e2d\u8fd0\u884c\u4f1a\u5f39\u51fa\u9ed1\u6846\n  LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/lib        # \u52a8\u6001\u5e93\u8f93\u51fa\u5730\u5740\uff0c\u9ed8\u8ba4 ${CMAKE_BINARY_DIR}\n  ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/lib        # \u9759\u6001\u5e93\u8f93\u51fa\u5730\u5740\uff0c\u9ed8\u8ba4 ${CMAKE_BINARY_DIR}\n  RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin        # \u53ef\u6267\u884c\u7a0b\u5e8f\u8f93\u51fa\u5730\u5740\uff0c\u9ed8\u8ba4 ${CMAKE_BINARY_DIR}\n)\n</code></pre> <ul> <li>\ud83d\udc4d\ud83d\udc4d\ud83d\udc4d\u4e3a\u9879\u76ee\u521b\u5efa\u5b8f<code>target_compile_definitions(main PUBLIC &lt;\u5b8f\u540d\u79f0&gt;)</code>\u8fd9\u6837\u5728\u4ee3\u7801\u4e2d<code>#indef &lt;\u5b8f\u540d\u79f0&gt;</code>\u5c31\u53ef\u4ee5\u4f7f\u7528</li> <li><code>target_compile_definitions(main PUBLIC \u5b8f\u540d\u79f0=233) == #define \u5b8f\u540d\u79f0 233</code></li> </ul>"},{"location":"notes/CMake/CMake/#_2","title":"\u6e90\u6587\u4ef6\u7ec4\u7ec7","text":"<p>Reference: \u3010\u516c\u5f00\u8bfe\u3011\u73b0\u4ee3CMake\u6a21\u5757\u5316\u9879\u76ee\u7ba1\u7406\u6307\u5357\u3010C/C++\u3011_\u54d4\u54e9\u54d4\u54e9_bilibili</p> <pre><code>.\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 biology\n\u2502   \u251c\u2500\u2500 CMakeLists.txt\n\u2502   \u251c\u2500\u2500 include\n\u2502   \u2502   \u2514\u2500\u2500 biology\n\u2502   \u2502       \u251c\u2500\u2500 Animal.h\n\u2502   \u2502       \u2514\u2500\u2500 Carer.h\n\u2502   \u2514\u2500\u2500 src\n\u2502       \u251c\u2500\u2500 Animal.cpp\n\u2502       \u2514\u2500\u2500 Carer.cpp\n\u251c\u2500\u2500 cmake\n\u2502   \u2514\u2500\u2500 MyUsefulFuncs.cmake\n\u2514\u2500\u2500 pybmain\n    \u251c\u2500\u2500 CMakeLists.txt\n    \u251c\u2500\u2500 include\n    \u2502   \u2514\u2500\u2500 pybmain\n    \u2502       \u2514\u2500\u2500 myutils.h\n    \u2514\u2500\u2500 src\n        \u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u63a8\u8350\u7684\u76ee\u5f55\u7ec4\u7ec7\u65b9\u5f0f</p> <ul> <li>\u5982\u4e0a\u7684 biology \u548c pybmain \u662f\u4e24\u4e2a\u5b50\u9879\u76ee <code>add_subdirectory</code></li> <li>\u9879\u76ee\u6839\u76ee\u5f55/include/\u9879\u76ee\u540d/\u6a21\u5757\u540d.h <code>target_include_directories</code></li> <li>\u9879\u76ee\u6839\u76ee\u5f55/src/\u6a21\u5757\u540d.cpp</li> <li>\u5728\u6e90\u6587\u4ef6\u4e2d\u4f7f\u7528<code>#include &lt;\u9879\u76ee\u540d/\u6a21\u5757\u540d.h&gt;</code></li> </ul> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u5934\u6587\u4ef6\u8981\u52a0<code>#pragma once</code></li> <li>\u5934\u6587\u4ef6\u6700\u597d\u6dfb\u52a0<code>namespace &lt;\u9879\u76ee\u540d&gt;</code></li> <li>\u5982\u679c\u8981\u5728\u5934\u6587\u4ef6\u4e2d\u5b9e\u73b0\u51fd\u6570\u5b9a\u4e49\uff0c\u8981\u6dfb\u52a0static\uff0c\u907f\u514d\u548c\u6e90\u6587\u4ef6\u7684\u5b9a\u4e49\u51b2\u7a81\uff1b\u7c7b\u6709inline\u5c5e\u6027\uff0c\u662f\u4e0d\u9700\u8981\u52a0 static \u7684</li> </ul> <p></p>"},{"location":"notes/CMake/CMake/#extern","title":"extern \u7684\u5c0f\u77e5\u8bc6","text":"<p>extern \u53ea\u4f1a\u7528\u5728\u53d8\u91cf\u7684\u58f0\u660e\u65f6\uff0c\u51fd\u6570\u548c\u7c7b\u7684\u58f0\u660e\u4e0d\u9700\u8981</p> <p><code>extern \"c\"</code> \u548c <code>extern</code> \u6ca1\u6709\u5173\u7cfb\uff0cC++\u9879\u76ee\u4e2d\u7684extern \"C\" {} - \u5434\u79e6 - \u535a\u5ba2\u56ed (cnblogs.com)</p> <pre><code>// \u5728\u5934\u6587\u4ef6\u4e2d\u58f0\u660e\u5168\u5c40\u53d8\u91cf\n// Header.h\nextern int globalVariable;\n\n// \u5728\u6e90\u6587\u4ef6\u4e2d\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\n// Source.cpp\n#include \"Header.h\"\nint globalVariable = 42;\n\n// \u5728\u53e6\u4e00\u4e2a\u6e90\u6587\u4ef6\u4e2d\u4f7f\u7528\u5168\u5c40\u53d8\u91cf\n// AnotherSource.cpp\n#include \"Header.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    cout &lt;&lt; globalVariable &lt;&lt; endl;  // \u8f93\u51fa 42\n    return 0;\n}\n</code></pre>"},{"location":"notes/CMake/CMake/#_3","title":"\u5e93","text":""},{"location":"notes/CMake/CMake/#_4","title":"\u590d\u6742\u7684\u4f8b\u5b50","text":"<p>\u8fd9\u4e2a\u4f8b\u5b50\u5b9e\u73b0\u4e86\u52a8\u6001/\u9759\u6001\u5e93\u7684\u751f\u6210\u548c\u8c03\u7528\uff0c\u6574\u4e2a\u9879\u76ee\u5206\u4e3a\u53ef\u6267\u884c\u7a0b\u5e8fexe \u5b50\u9879\u76ee\u3001\u52a8\u6001\u5e93\u5b50\u9879\u76ee\u3001\u9759\u6001\u5e93\u5b50\u9879\u76ee\uff0c\u6587\u4ef6\u6811\u662f</p> <pre><code>.\n\u251c\u2500\u2500 CMakeLists.txt\n\u251c\u2500\u2500 ShareLib\n\u2502   \u251c\u2500\u2500 CMakeLists.txt\n\u2502   \u251c\u2500\u2500 include\n\u2502   \u2502   \u2514\u2500\u2500 helloD.h\n\u2502   \u2514\u2500\u2500 src\n\u2502       \u2514\u2500\u2500 helloD.cpp\n\u251c\u2500\u2500 StaticLib\n\u2502   \u251c\u2500\u2500 CMakeLists.txt\n\u2502   \u251c\u2500\u2500 include\n\u2502   \u2502   \u2514\u2500\u2500 helloS.h\n\u2502   \u2514\u2500\u2500 src\n\u2502       \u2514\u2500\u2500 helloS.cpp\n\u2514\u2500\u2500 exe\n    \u251c\u2500\u2500 CMakeLists.txt\n    \u2514\u2500\u2500 main.cpp\n</code></pre> <p>\u6839 cmake \u6587\u4ef6\u548c\u4e09\u4e2a\u5b50\u9879\u76ee\u7684 cmake \u6587\u4ef6\u5982\u4e0b</p> <pre><code># root cmake file\ncmake_minimum_required (VERSION 3.10)\n\nset(CMAKE_CXX_STANDARD 20)\nset(CMAKE_CXX_STANDARD_REQUIRED ON) \n\nproject (\"test\" LANGUAGES C CXX)\n\nif (PROJECT_BINARY_DIR STREQUAL PROJECT_SOURCE_DIR)\n  message(WARNING \"The binary directory of CMake cannot be the same as source directory!\")\nendif()\n\n# set build type\nif (NOT CMAKE_BUILD_TYPE)\n  set(CMAKE_BUILD_TYPE RELEASE)\nendif()\n\n# handle Windows\nif (WIN32)\n  add_definitions(-DNOMINMAX -D_USE_MATH_DEFINES)\nendif()\n\n# use cache to make build faster\nif (NOT MSVC)\n  find_program(CCACHE_PROGRAM ccache)\n  if (CCACHE_PROGRAM)\n    message(STATUS \"Found CCache: ${CCACHE_PROGRAM}\")\n    set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_PROGRAM})\n    set_property(GLOBAL PROPERTY RULE_LAUNCH_LINK ${CCACHE_PROGRAM})\n  endif()\nendif()\n\nadd_subdirectory(StaticLib)\nadd_subdirectory(ShareLib)\nadd_subdirectory(exe)\n</code></pre> <pre><code># cmake file in exe sub project\nadd_executable(main main.cpp)\ntarget_link_libraries(main PUBLIC ps pd)\n</code></pre> <pre><code># cmake file in sharelib sub project\nfile(GLOB_RECURSE sources CONFIGURE_DEPENDS src/*.cpp)\nfile(GLOB_RECURSE headers CONFIGURE_DEPENDS include/*.h include/*.hpp)\n\nadd_library(pd SHARED ${sources} ${headers})\ntarget_include_directories(pd PUBLIC include)\n</code></pre> <pre><code># cmake file in staticlib sub project\nfile(GLOB_RECURSE sources CONFIGURE_DEPENDS src/*.cpp)\nfile(GLOB_RECURSE headers CONFIGURE_DEPENDS include/*.h include/*.hpp)\n\nadd_library(ps STATIC ${sources} ${headers})\ntarget_include_directories(ps PUBLIC include)\n</code></pre> <ul> <li>\u52a8\u6001/\u9759\u6001\u5e93\u7684build\u53ea\u6709\u53c2\u6570\u4e0d\u540c\uff0c\u5176\u4ed6\u4e00\u81f4</li> </ul>"},{"location":"notes/CMake/CMake/#_5","title":"\u5e93\u7684\u8c03\u7528","text":"<ul> <li> <p><code>target_include_directories</code> \u7528\u4e8e\u5411\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u6807\u6dfb\u52a0\u5934\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84</p> </li> <li> <p><code>target_link_directories</code> \u7528\u4e8e\u5411\u4e00\u4e2a\u6216\u591a\u4e2a\u76ee\u6807\u6dfb\u52a0\u94fe\u63a5\u5e93\u7684\u641c\u7d22\u8def\u5f84</p> </li> <li> <p><code>target_link_libraries</code> \u7528\u4e8e\u94fe\u63a5\u52a8\u6001/\u9759\u6001\u5e93\uff0c\u524d\u63d0\u662f\u53ef\u4ee5\u627e\u5230\u5e93\u7684\u5730\u5740(\u5b98\u65b9\u6587\u6863\u4ecb\u7ecd\u4e86\u9ed8\u8ba4\u7684\u67e5\u627e\u4f4d\u7f6e)\u3002\u5982\u679c\u627e\u4e0d\u5230\uff0c\u9700\u8981\u5728\u8fd9\u4e2a\u547d\u4ee4\u4e4b\u524d\u8c03\u7528<code>target_link_directories</code></p> </li> </ul> <p>\u52a8\u6001\u5e93\u548c\u9759\u6001\u5e93\u53ef\u4ee5\u7406\u89e3\u4e3a\u88ab\u7ffb\u8bd1\u6210\u673a\u5668\u6307\u4ee4\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\u7684\u6e90\u4ee3\u7801\uff08\u52a8\u6001\u5e93\u6709\u6267\u884c\u6743\u9650\uff0c\u9759\u6001\u5e93\u6ca1\u6709\u6267\u884c\u6743\u9650\uff09\uff0c\u4f7f\u7528\u5b83\u4eec\u548c\u4f7f\u7528\u4e00\u4e2a C++\u6e90\u6587\u4ef6\u6a21\u5757\u5728\u539f\u7406\u4e0a\u4e00\u6837\u3002\u7f16\u8bd1\u5668\u9700\u8981\u83b7\u5f97\u5e93\u7684\u5730\u5740\u548c\u5e93\u7684\u5934\u6587\u4ef6\u6765\u5b9e\u73b0\u94fe\u63a5\u3002<code>target_link_*</code>\u7528\u6765\u83b7\u5f97\u5e93\u7684\u5730\u5740\uff0c<code>target_include_directories</code>\u7528\u6765\u83b7\u5f97\u5e93\u7684\u5934\u6587\u4ef6\u3002</p> <pre><code>target_include_directories(main PUBLIC &lt;lib-head-file-address&gt;)\ntarget_link_directories(main PUBLIC &lt;lib-file-address&gt;)\ntarget_link_libraries(main PUBLIC &lt;lib-name&gt;)\n</code></pre> <p>\u7279\u6b8a\u60c5\u51b5\u662f\u5982\u679c\u8fd9\u4e2a\u5e93\u662f\u4f7f\u7528<code>add_library</code>\u521b\u5efa\u7684\u76ee\u6807\uff0c\u4f7f\u7528<code>target_link_libraries</code>\u53ef\u4ee5\u76f4\u63a5\u83b7\u5f97\u5934\u6587\u4ef6\u800c\u4e0d\u7528<code>target_include_directories</code> \u5c31\u5411\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\u6240\u5199</p>"},{"location":"notes/CMake/CMake/#_6","title":"\u7236\u5b50\u6a21\u5757","text":"<ul> <li><code>add_subdirectory(\u5b50\u6a21\u5757\u6240\u5728\u76ee\u5f55)</code>\u5c06\u5b50\u6a21\u5757\u7684<code>CMakeLists.txt</code>\u5bfc\u5165</li> <li>\u7236\u6a21\u5757\u7684\u5b9a\u4e49\u4f20\u7ed9\u5b50\u6a21\u5757\uff0c\u53cd\u4e4b\u4e0d\u53ef\u4ee5</li> <li>\u53ef\u4ee5\u6dfb\u52a0<code>PARENT_SCOPE</code>\u5c06\u5b50\u6a21\u5757\u53d8\u91cf\u4f20\u7ed9\u7236\u6a21\u5757</li> </ul> <p><code>include()</code>\u662f\u76f4\u63a5\u590d\u5236\u7c98\u8d34\uff1b\u800c\u4f7f\u7528<code>add_subdirectory</code>\u65f6\u5b50\u6a21\u5757\u4e2d\u7684<code>${CMAKE_CURRENT_SOURCE_DIR}</code>\u548c\u7236\u6a21\u5757\u4e0d\u540c</p>"},{"location":"notes/CMake/CMake/#windows","title":"Windows \u7684\u5751","text":"<p>\u5728Windows\uff08\u53bb\u6b7b\uff09\u4e2d\u52a8\u6001\u94fe\u63a5\u5e93\u4ee3\u7801\u524d\u5fc5\u987b\u6dfb\u52a0\ud83d\ude21\ud83d\ude21\ud83d\ude21\ud83d\ude21</p> <pre><code>// \u52a8\u6001\u94fe\u63a5\u5e93\u6e90\u6587\u4ef6\n#ifdef _MSC_VER\n__declspec(dllexport)\n#endif\n\n// \u52a8\u6001\u94fe\u63a5\u5e93\u5934\u6587\u4ef6\n#ifdef _MSC_VER\n__declspec(dllimport)\n#endif\n</code></pre> <p>Windows \u7684dll\u6587\u4ef6\u5fc5\u987b\u5728\u53ef\u6267\u884c\u6587\u4ef6\u540c\u76ee\u5f55\u6216\u8005\u5728\u7cfb\u7edf\u8def\u5f84\u4e0b\ud83d\ude21\ud83d\ude21\ud83d\ude21\ud83d\ude21</p>"},{"location":"notes/CMake/CMake/#_7","title":"\u7b2c\u4e09\u65b9\u5e93\ud83d\ude35\u200d\ud83d\udcab\ud83d\ude35\u200d\ud83d\udcab","text":"<ul> <li>\u5728linux\u4e2d\u5e93\u6587\u4ef6\u5728<code>/usr/lib</code>\u5934\u6587\u4ef6\u5728<code>/usr/inculde</code></li> <li>\u5728Windows\u4e2d\u4e0d\u786e\u5b9a\ud83d\ude21\ud83d\ude21\ud83d\ude21\ud83d\ude21</li> <li>cmake\u9996\u5148\u627e\u5230\u6240\u9700\u7b2c\u4e09\u65b9\u5e93\u63d0\u4f9b\u7684<code>xxConfig.cmake</code>\u914d\u7f6e\u6587\u4ef6\uff0c\u6309\u7167\u8bf4\u660e\u5bfc\u5165\u7ec4\u4ef6\uff08\u5e93\u7684\u90e8\u5206\uff09\uff0c\u518d\u94fe\u63a5\u5230\u9879\u76ee\uff0c<code>find_package</code> \u7684\u672c\u8d28\u5c31\u662f\u627e<code>xxConfig.cmake</code></li> </ul> <pre><code>// \u4ee5TBB\u5e93\u4e3a\u4f8b\nfind_package(TBB CONFIG COMPONENT tbb tbbmalloc REQUIRED) # CONFIG\u5982\u679c\u5b58\u5728\uff0c\u5c31\u53ea\u4f1a\u627econfig\u6587\u4ef6\nadd_executable(main main.cpp)\ntarget_link_libraries(main PUBLIC TBB::tbb TBB::tbbmalloc)\n</code></pre> <ul> <li>Windows\u627e\u4e0d\u5230config\u6587\u4ef6\u89e3\u51b3\u65b9\u6cd5\uff08QT \u4e3a\u4f8b\uff09</li> <li>\u5728<code>CMakeLists.txt</code>\u4e2d\u6dfb\u52a0<code>set(Qt5_DIR &lt;Qt5Config\u76ee\u5f55\u5730\u5740&gt;)</code></li> <li>\u5728\u547d\u4ee4\u4e2d\u6dfb\u52a0<code>-DQt5_DIR=\"&lt;Qt5Config\u76ee\u5f55\u5730\u5740&gt;\"</code></li> </ul>"},{"location":"notes/CMake/CMake/#_8","title":"\u6253\u5370\u8f93\u51fa","text":""},{"location":"notes/CMake/CMake/#_9","title":"\u8de8\u5e73\u53f0","text":""},{"location":"notes/CMake/CMake/#_10","title":"\u8bed\u6cd5\u95ee\u9898","text":""},{"location":"notes/CMake/CMake/#_11","title":"\u65b9\u4fbf\u4f7f\u7528\u7684\u6280\u5de7","text":""},{"location":"notes/CMake/CMake/#cmakepresetsjson","title":"CMakePresets.json","text":"<p>vscode-cmake-tools/docs/cmake-presets.md at main \u00b7 microsoft/vscode-cmake-tools (github.com)</p> <p>CMake Integration | Microsoft Learn</p> <p>\u5728vscode\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528cmake-tools\u63d2\u4ef6\u7684\u547d\u4ee4\u6309\u5f53\u524d\u9009\u62e9\u7684\u7f16\u8bd1\u5668\u81ea\u52a8\u751f\u6210\u6587\u4ef6\uff0c\u5982\u679c\u4f7f\u7528\u4e86vcpkg\u7ba1\u7406\u5305\uff0c\u9700\u8981\u6dfb\u52a0toolchainFile\uff0c\u8fd9\u4e2a\u6587\u4ef6\u7684\u64cd\u4f5c\u7c7b\u4f3c\u4e8e\u5728terminal\u4e2d<code>cmake --build -D....</code>\u586b\u5199\u4e86\u5fc5\u8981\u7684\u53c2\u6570\u548c\u5b9a\u4e49</p> <pre><code>{\n    \"version\": 3,\n    \"configurePresets\": [\n        {\n            \"name\": \"VSx86-debug\",\n            \"displayName\": \"Visual Studio Community 2022 Release - x86\",\n            \"description\": \"Using compilers for Visual Studio 17 2022 (x86 architecture)\",\n            \"generator\": \"Visual Studio 17 2022\",\n            \"toolset\": \"host=x86\",\n            \"architecture\": \"win32\",\n            \"binaryDir\": \"${sourceDir}/out/build/${presetName}\",\n            \"cacheVariables\": {\n                \"CMAKE_INSTALL_PREFIX\": \"${sourceDir}/out/install/${presetName}\",\n                \"CMAKE_C_COMPILER\": \"cl.exe\",\n                \"CMAKE_CXX_COMPILER\": \"cl.exe\"\n            },\n            \"toolchainFile\": \"C:/vcpkg/scripts/buildsystems/vcpkg.cmake\"\n        }\n    ],\n    \"buildPresets\": [\n        {\n            \"name\": \"VSx86-debug-debug\",\n            \"displayName\": \"Visual Studio Community 2022 Release - x86 - Debug\",\n            \"configurePreset\": \"VSx86-debug\",\n            \"configuration\": \"Debug\"\n        }\n    ]\n}\n</code></pre> <p>Reference</p> <ul> <li> <p>\u3010\u516c\u5f00\u8bfe\u3011\u73b0\u4ee3CMake\u6a21\u5757\u5316\u9879\u76ee\u7ba1\u7406\u6307\u5357\u3010C/C++\u3011_\u54d4\u54e9\u54d4\u54e9_bilibili</p> </li> <li> <p>CMake \u4fdd\u59c6\u7ea7\u6559\u7a0b\u3010C/C++\u3011</p> </li> </ul>"},{"location":"notes/Git/Git/","title":"Git","text":""},{"location":"notes/Git/Git/#git-config","title":"Git Config","text":"<p>git config \u5206\u4e3a</p> <ul> <li>\u7cfb\u7edf\u7ea7(--system)\uff1a\u4e3a\u5168\u90e8\u7528\u6237\u8bbe\u7f6e</li> <li>\u7528\u6237\u7ea7(--global)\uff1a\u4e3a\u5f53\u524d\u7528\u6237\u8bbe\u7f6e</li> <li>\u4ed3\u5e93\u7ea7(--local)\uff1a\u4f8b\u5982\u4e3a\u5f53\u524d\u4ed3\u5e93\u8bbe\u7f6e\u8fdc\u7a0b\u4ed3\u5e93</li> </ul> <p><code>git config --show-origin -l</code> \u4f1a\u5217\u51fa\u5f53\u524d\u7684\u6240\u6709\u7ea7\u522b\u7684\u8bbe\u7f6e\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u8bbe\u7f6e\u6240\u5904\u7684\u914d\u7f6e\u6587\u4ef6</p> <p>\u914d\u7f6e\u7528\u6237\u540d\u548c\u90ae\u7bb1</p> <pre><code>git config --global user.name \"xxx\"  \ngit config --global user.email xxx@outlook.com   \n</code></pre> <p>\u914d\u7f6epush\u76f8\u5173</p> <pre><code>git config --global --add push.default current\ngit config --global --add push.autoSetupRemote true\n</code></pre> <p>\u4f60\u4f1a\u6536\u83b7\u4e24\u4e2a\u597d\u5904\u30021\uff09\u4e0d\u9700\u8981\u300cgit push origin xxx\u300d\uff0c\u53ea\u8981\u300cgit push\u300d\uff0c2\uff09\u518d\u4e5f\u4e0d\u4f1a\u9047\u5230\u300cno upstream branch\u300d\u7684\u62a5\u9519\uff0c\u4e5f\u4e0d\u9700\u8981\u300cgit push \u2013set-upstream origin test &amp;&amp; git push\u300d\u3002\u56e0\u4e3a\u6211\u4eec\u6267\u884c git push \u7684\u5927\u90e8\u5206\u573a\u666f\u90fd\u662f push \u5230\u540c\u540d\u7684 remote branch\u3002\u6765\u6e90\u662f Auto setup remote branch and never again see an error about the missing upstream | pawelgrzybek.com\u3002</p>"},{"location":"notes/Git/Git/#ignore","title":"Ignore","text":"<p>\u5168\u5c40ignore: ~/.gitignore_global\uff0cMacOS\u4e2d\u5efa\u8bae\u5c4f\u853d<code>.DS_Store</code></p> <pre><code>*~\n.DS_Store\n</code></pre> <p>\u5728\u4e3b\u76ee\u5f55\u4e0b\u5efa\u7acb<code>.gitignore</code>\u6587\u4ef6</p> \u5339\u914d\u793a\u4f8b \u89e3\u91ca bin/ \u5ffd\u7565\u5f53\u524d\u8def\u5f84\u4e0b\u7684 bin \u6587\u4ef6\u5939\uff0c\u8be5\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u88ab\u5ffd\u7565\uff0c\u4e0d\u5ffd\u7565 bin \u6587\u4ef6\u3002 /bin \u5ffd\u7565\u6839\u76ee\u5f55\u4e0b\u7684 bin \u6587\u4ef6\u3002 /*.c \u5ffd\u7565 cat.c\uff0c\u4e0d\u5ffd\u7565 build/cat.c\u3002 debug/*.obj \u5ffd\u7565 debug/io.obj\uff0c\u4e0d\u5ffd\u7565 debug/common/io.obj \u548c tools/debug/io.obj\u3002 **/foo \u5ffd\u7565 /foo, a/foo, a/b/foo \u7b49\u3002 a/**/b \u5ffd\u7565 a/b, a/x/b, a/x/y/b \u7b49\u3002 !/bin/run.sh \u4e0d\u5ffd\u7565 bin \u76ee\u5f55\u4e0b\u7684 run.sh \u6587\u4ef6\u3002 *.log \u5ffd\u7565\u6240\u6709 .log \u6587\u4ef6\u3002 config.php \u5ffd\u7565\u5f53\u524d\u8def\u5f84\u7684 config.php \u6587\u4ef6\u3002 <ul> <li><code>git check-ignore -v &lt;file&gt;</code>\uff1a\u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u662f\u5426\u88ab\u5ffd\u7565\uff0c\u4ee5\u53ca\u5339\u914d\u7684\u89c4\u5219</li> <li>gitignore \u6a21\u677f</li> </ul>"},{"location":"notes/Git/Git/#remove-file","title":"remove file","text":"<p>\u6dfb\u52a0\u6587\u4ef6\u5230\u6682\u5b58\u533a\u7528<code>git add .</code>\uff0c\u5220\u9664\u5206\u4e3a\u4e24\u79cd</p> <pre><code># \u53ef\u4ee5\u5220\u9664\u672c\u5730\u7248\u672c\u5e93\u4e2d\u7684\u6587\u4ef6\u548c\u672c\u5730\u5b58\u50a8\u7684\u6587\u4ef6\ngit rm &lt;file&gt;\n# \u4ec5\u5220\u9664\u672c\u5730\u7248\u672c\u5e93\u4e2d\u7684\u6587\u4ef6\uff08\u6587\u4ef6\u53d8\u4e3auntracked\u72b6\u6001\uff09\ngit rm -cached &lt;file&gt;\n</code></pre>"},{"location":"notes/Git/Git/#commit-message-format","title":"Commit Message Format","text":"<p>Reference</p> <ul> <li> <p>angular/CONTRIBUTING.md at main \u00b7 angular/angular (github.com)</p> </li> <li> <p>Commit message \u548c Change log \u7f16\u5199\u6307\u5357 - \u962e\u4e00\u5cf0\u7684\u7f51\u7edc\u65e5\u5fd7 (ruanyifeng.com)</p> </li> </ul> <p>\u7b80\u5355\u6765\u8bf4\u57fa\u672c\u7684\u683c\u5f0f\u662f</p> <pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n// \u7a7a\u4e00\u884c\n&lt;body&gt;\n</code></pre> <p><code>type</code>\u662f\u57fa\u672c\u7684\u63d0\u4ea4\u7c7b\u578b\uff1a</p> <ul> <li>feat\uff1a\u65b0\u529f\u80fd\uff08feature\uff09</li> <li>fix\uff1a\u4fee\u8865bug</li> <li>docs\uff1a\u6587\u6863\uff08documentation\uff09</li> <li>style\uff1a \u683c\u5f0f\uff08\u4e0d\u5f71\u54cd\u4ee3\u7801\u8fd0\u884c\u7684\u53d8\u52a8\uff09</li> <li>refactor\uff1a\u91cd\u6784\uff08\u5373\u4e0d\u662f\u65b0\u589e\u529f\u80fd\uff0c\u4e5f\u4e0d\u662f\u4fee\u6539bug\u7684\u4ee3\u7801\u53d8\u52a8\uff09</li> <li>test\uff1a\u589e\u52a0\u6d4b\u8bd5</li> <li>build\uff1a\u6784\u5efa\u8fc7\u7a0b\u6216\u8f85\u52a9\u5de5\u5177\u7684\u53d8\u52a8</li> </ul> <p><code>scope</code>\u7528\u4e8e\u8bf4\u660e commit \u5f71\u54cd\u7684\u8303\u56f4\uff0c\u6bd4\u5982\u6570\u636e\u5c42\u3001\u63a7\u5236\u5c42\u3001\u89c6\u56fe\u5c42\u7b49\u7b49\uff0c\u89c6\u9879\u76ee\u4e0d\u540c\u800c\u4e0d\u540c\u3002</p> <p><code>subject</code> \u662f\u7b80\u8ff0</p> <p><code>body</code> \u662f\u8be6\u7ec6\u63cf\u8ff0</p>"},{"location":"notes/Git/Git/#branch","title":"branch","text":"<pre><code># create branch\ngit branch &lt;name&gt;\n# create branch and into it\ngit checkout -b &lt;name&gt;\n\n# delete local branch\ngit branch -d &lt;name&gt;\n# delete remote branch\ngit push origin --delete &lt;name&gt;\n\n# switch to branch\ngit checkout &lt;name&gt;\n\n# show branch\ngit branch\n# show remote branch\ngit branch -r\n\n# rename branch\ngit branch -m &lt;old&gt; &lt;new&gt;\n</code></pre>"},{"location":"notes/Git/Git/#git-stash","title":"git stash","text":"<pre><code># create a stash stack after git add, then working diretory is clean\ngit stash\n# recommend command below to create\ngit stash save \"message\"\n\n# list all the stash stack\ngit stash list\n\n# get back to the last working diretory (won't delete this stash)\ngit stash apply\n\n# get back to one of the previous working diretory\ngit stash apply atash@{2}\n\n# get back and delete this stash\ngit stash pop\n\n# delete stash\ngit stash drop stash@{2}\n</code></pre>"},{"location":"notes/Git/Git/#checkout","title":"Checkout","text":"<p><code>git checkout</code> \u53ef\u4ee5\u5c06\u5f53\u524d\u7684\u5de5\u4f5c\u533a\u5207\u6362\u5230\u4efb\u610f\u4e00\u4e2a\u63d0\u4ea4\u7684\u8bb0\u5f55\u4e0a\uff1a</p> <ul> <li><code>git checkout &lt;branch&gt;</code> \u5207\u6362\u5230branch\u7684\u6700\u65b0\u4e00\u4e2a\u63d0\u4ea4</li> <li><code>git checkout &lt;commit-id&gt;</code> \u5207\u6362\u5230\u6307\u5b9a\u7684 commit \u63d0\u4ea4</li> <li><code>git checkout &lt;tag&gt;</code> \u5207\u6362\u5230\u6307\u5b9a\u7684 tag \u3002\u56e0\u4e3atag\u7c7b\u4f3c\u4e00\u4e2a\u6709\u7279\u6b8a\u540d\u79f0\u7684commit\u8bb0\u5f55\uff0c\u6240\u4ee5\u4f1a\u76f4\u63a5\u5207\u6362\u5230 tag \u6307\u5411\u7684commit\u8bb0\u5f55\u3002</li> </ul> <p>Tag &amp; Branch</p> <p>tag \u548c branch \u90fd\u662f\u63a7\u5236\u7248\u672c\u548c\u5f00\u53d1\u8fdb\u5ea6\u7684\u5de5\u5177\uff0c\u4e24\u8005\u76f8\u4e92\u72ec\u7acb\u3002tag \u7ba1\u8f96\u7684 commit \u63d0\u4ea4\u8303\u56f4\u4ec5\u9650\u4e00\u4e2a commit\uff0c\u800c branch \u7ba1\u8f96\u4e00\u6574\u4e2a\u5206\u652f\u4e2d\u7684\u6240\u6709 commit\u3002</p>"},{"location":"notes/Git/Git/#detached-head","title":"detached HEAD","text":"<p>\u524d\u9762\u8bf4\u5230 branch \u7684\u7ba1\u8f96\u8303\u56f4\u662f\u4e00\u4e2a\u5206\u652f\u4e2d\u7684\u6240\u6709 commit\u8bb0\u5f55\uff0c\u6bcf\u4e00\u4e2a\u65b0\u7684 commit \u8bb0\u5f55\u90fd\u4f1a\u81ea\u52a8\u6dfb\u52a0\u5230\u5f53\u524dbranch head \u7684\u540e\u9762\u5e76\u5c06 head \u65b0\u7684\u8bb0\u5f55\u4e0a\u3002\u5982\u679c\u5f53\u524d\u5de5\u4f5c\u533a\u6240\u5728\u7684commit\u8bb0\u5f55(Head)\u4e0d\u662f\u4e00\u4e2a\u5206\u652f\u7684\u6700\u540e\u4e00\u4e2a\u8bb0\u5f55\uff0c\u5c31\u6ca1\u6709\u529e\u6cd5\u5c06\u63d0\u4ea4\u7684\u8bb0\u5f55\u6dfb\u52a0\u5230\u5206\u652f\u7684\u540e\u9762\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c31\u662f<code>detached HEAD</code>\u3002\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u7684\u4e00\u4e2a\u573a\u666f\u5c31\u662f\uff1a\u5f53\u524d head \u4f4d\u4e8e<code>commit_n</code>\u5904\uff0c\u4f46\u60f3\u56de\u5230\u4e4b\u524d\u5f00\u53d1\u7684\u67d0\u4e2a\u63d0\u4ea4<code>commitn - 4</code> \u5904\u5f00\u53d1\uff0c\u53c8\u4e0d\u60f3\u5e9f\u5f03\u5f53\u524d\u7684\u5f00\u53d1\u8fdb\u5ea6\uff0c\u4e00\u4e2a\u5408\u7406\u7684\u60f3\u6cd5\u662f\u7528<code>git checkout</code>\u5c06 HEAD \u79fb\u52a8\u5230\u4e4b\u524d\u7684 commit\uff0c\u8fd9\u65f6\u4f1a\u51fa\u73b0 <code>detached HEAD</code>\u3002\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u5230\u8fbe\u8fd9\u4e2a\u8001commit\u4e4b\u540e\u65b0\u5efa\u4e00\u4e2a\u5206\u652f\uff0c\u7136\u540e\u8fdb\u884c\u63a5\u4e0b\u6765\u7684\u5f00\u53d1\u3002</p>"},{"location":"notes/Git/Git/#get-back","title":"Get Back","text":"<p>\u5728\u5f00\u53d1\u4e2d\u7ecf\u5e38\u9047\u5230\u60f3\u8981\u56de\u5230\u4e4b\u524d\u5f00\u53d1\u72b6\u6001\u7684\u60c5\u51b5\uff0c\u8fd9\u91cc\u6839\u636e\u53ef\u80fd\u7684\u573a\u666f\u8ba8\u8bba\u4e00\u4e0b\u5bf9\u5e94\u7684\u64cd\u4f5c</p> <ol> <li><code>git reset --soft &lt;commit-id&gt;</code>\uff1a\u4e0d\u60f3\u66f4\u6539\u5de5\u4f5c\u533a\u7684\u4ee3\u7801\uff0c\u4f46\u662f\u5bf9\u6700\u65b0\u7684\u63d0\u4ea4\u4e0d\u6ee1\u610f\uff0c\u60f3\u56de\u5230\u4e4b\u524d\u7684\u63d0\u4ea4\uff08\u672c\u5730\u7684\u4ee3\u7801\u4e0d\u53d8\uff0c\u4f46\u4fee\u6539 Git \u7684\u8ffd\u8e2a\u8bb0\u5f55\uff09</li> <li><code>git reset --hard &lt;commit-id&gt;</code>\uff1a\u4ee3\u7801\u5199\u6b7b\u4e86\uff0c\u4e0d\u77e5\u9053\u95ee\u9898\u5728\u54ea\uff0c\u60f3\u5c06\u6574\u4e2a\u9879\u76ee\u56de\u9000\u5230\u4e4b\u524d\u7684\u72b6\u6001\uff08\u672c\u5730\u7684\u4ee3\u7801\u548c Git \u8bb0\u5f55\u5168\u90e8\u56de\u9000\uff09</li> <li><code>git revert &lt;commit-id&gt;</code>\uff1a\u60f3\u8981\u5e9f\u5f03\u65b0\u5f00\u53d1\u7684 feature\uff0c\u4f46\u4e0d\u60f3\u62b9\u53bb\u4ee3\u7801\u8bb0\u5f55\uff0c\u4ee5\u9632\u4ee5\u540e\u8981\u518d\u6b21\u4f7f\u7528\u8fd9\u4e2afeature\uff0c\u8ba9\u5de5\u4f5c\u533a\u548c Git \u8bb0\u5f55\u201c\u56de\u5230\u539f\u5148\u7684\u72b6\u6001\u201d\uff0c\u4f46 Git\u8bb0\u5f55\u4e0d\u4f1a\u62b9\u53bb\u3002\uff08\u614e\u7528\uff09\u5177\u4f53\u539f\u7406\u89c1\u5b98\u65b9\u6587\u6863</li> <li><code>git checkout &lt;commit-id&gt;</code>\uff1a\u73b0\u5728\u662f 2.0 \u7248\u672c\uff0c\u4f46\u60f3\u56de\u5230 1.0 \u7248\u672c\u505a\u957f\u671f\u7684\u7ef4\u62a4\uff08\u9700\u8981\u65b0\u5efa\u5206\u652f\uff0c\u907f\u514d detached HEAD\uff09</li> </ol> <p>\u5982\u679c\u5f53\u524dcommit\u53ea\u6709\u4e00\u4e2a\u7236commit\uff08\u6ca1\u6709 merge\uff09\uff0c<code>HEAD~ == \u4e0a\u4e00\u4e2a commit</code> <code>HEAD~2 == \u4e0a 2 \u4e2a commit</code> </p>"},{"location":"notes/Git/Git/#link-remote-repo","title":"link remote repo","text":"<pre><code># link remote repo\ngit remote add origin [url]\n\n# show linked remote repo\ngit remote show origin\n\n# remove remote repo\ngit remote remove origin\n</code></pre>"},{"location":"notes/Git/Git/#push-to-github","title":"push to github","text":"<pre><code># push local branch to remote repo's default branch(master)\ngit push origin &lt;local-branch&gt;\n# push local branch to specific remote branch\ngit push origin &lt;local-branch&gt;:&lt;remote-branch&gt;\n# if local branch name is same as remote branch\ngit push origin &lt;local-branch&gt;\n\n# if remote repo is empty use '-u'\n# -u, --set-upstream    set upstream for git pull/status\ngit push -u origin master\n</code></pre> <p><code>git push</code> \u7684\u4f5c\u7528\u662f\u5c06\u6307\u5b9a\u7684\u672c\u5730\u5206\u652f\u63a8\u9001\u5230\u6307\u5b9a\u7684\u8fdc\u7a0b\u5206\u652f\uff0c\u53ef\u4ee5\u7528<code>git remote show origin</code> \u548c <code>git branch -vv</code> \u663e\u793a\u672c\u5730\u5206\u652f\u548c\u8fdc\u7a0b\u5206\u652f\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u5728\u65b0\u5efa\u8fdc\u7a0b\u5206\u652f\u7684\u65f6\u5019\u9700\u8981\u4f7f\u7528<code>-u</code>\u8bbe\u7f6e\u8fd9\u79cd\u6620\u5c04\u3002</p> <pre><code>git config --global --add push.default current\ngit config --global --add push.autoSetupRemote true\n</code></pre> <ul> <li>\u4e00\u822c\u64cd\u4f5c\u662f\u5c06\u672c\u5730\u5206\u652f\u63a8\u9001\u5230\u540c\u540d\u7684\u8fdc\u7a0b\u5206\u652f\uff0c\u4f7f\u7528<code>git push origin &lt;local-branch&gt;</code>\u3002\u4f46\u662f\u8fd9\u4e0d\u65b9\u4fbf\uff0c\u56e0\u4e3a\u901a\u5e38\u90fd\u662f\u5728\u5f53\u524d\u5206\u652f\u4e0b\u63a8\u9001\u5f53\u524d\u5206\u652f\u3002\u4f7f\u7528\u7b2c\u4e00\u4e2a\u8bbe\u7f6e\u5c31\u53ef\u4ee5\u53ea\u8f93\u5165<code>git push</code> \u63a8\u9001\u5f53\u524d\u5206\u652f\u5230\u8fdc\u7a0b</li> <li>\u5982\u679c\u662f\u7b2c\u4e00\u6b21\u63a8\u9001\u8fd9\u4e2a\u5206\u652f\uff0c\u9700\u8981\u547d\u4ee4<code>-u</code>\uff0c\u8fd9\u4e5f\u6709\u70b9\u9ebb\u70e6\uff0c\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u8bbe\u7f6e\uff0c\u4e5f\u53ea\u9700\u8981\u8f93\u5165<code>git push</code>\u5c31\u884c</li> </ul> <p>Reference\uff1aAuto setup remote branch and never again see an error about the missing upstream | pawelgrzybek.com</p>"},{"location":"notes/Git/Git/#pull-from-github","title":"pull from github","text":"<pre><code># fetch specific branch and merge it to current branch\ngit pull origin &lt;remote-branch&gt;\n</code></pre> <p>\u4f7f\u7528<code>git pull</code>\u53ef\u4ee5\u5c06\u8fdc\u7a0b\u4ed3\u5e93\u7684\u6700\u65b0\u72b6\u6001\u62c9\u53d6\u4e0b\u6765\uff0c\u5e76\u548c\u5f53\u524d\u6240\u5728\u7684\u672c\u5730\u4ed3\u5e93\u5408\u5e76\u3002\u901a\u5e38\u6765\u8bf4\u672c\u5730\u4ed3\u5e93\u548c\u8fdc\u7a0b\u4ed3\u5e93\u7684\u540d\u79f0\u76f8\u540c\uff0c\u5982\u679c\u5728\u5206\u652fmain\u4e0b\uff0c\u6267\u884c<code>git pull origin main</code>\u5c31\u53ef\u4ee5\u5c06\u672c\u5730\u4ed3\u5e93\u7684main\u66f4\u65b0\u4e3a\u6700\u65b0\u7684\u4e91\u7aef\u7248\u672c\u3002\u5982\u679c\u672c\u5730\u7684\u63d0\u4ea4\u548c\u8fdc\u7a0b\u7684\u6700\u65b0\u7248\u672c\u51b2\u7a81\uff0c\u9700\u8981\u624b\u52a8\u89e3\u51b3\u51b2\u7a81\u3002\u6240\u6709\u7684pull\u64cd\u4f5c\u5fc5\u987b\u5728\u672c\u5730\u6682\u5b58\u533a\u6ca1\u6709\u4fee\u6539\u7684\u65f6\u5019\u6267\u884c\u3002</p> <p>\u5982\u679c\u8981\u62c9\u53d6\u4e00\u4e2a\u672c\u5730\u6ca1\u6709\u7684\u8fdc\u7a0b\u5206\u652f\uff0c\u5e94\u8be5\u6267\u884c</p> <pre><code>git fetch\ngit checkout -b &lt;new-local-branch&gt; origin/&lt;remote-branch&gt;\n</code></pre> <p>\u800c\u4e0d\u662f<code>git pull</code></p> <p>\u6309\u7167\u60ef\u4f8b<code>new-local-branch</code> \u548c <code>remote-branch</code> \u5e94\u8be5\u76f8\u540c</p>"},{"location":"notes/Git/Git/#download-specific-part-of-repo","title":"Download specific part of repo","text":"<p>https://github.com/download-directory/download-directory.github.io.git</p> <p>https://github.com/MinhasKamal/DownGit.git</p>"},{"location":"notes/Git/Git/#license","title":"License","text":"<p>\u6dfb\u52a0\u8bb8\u53ef\u5230\u4ed3\u5e93 - GitHub \u6587\u6863</p>"},{"location":"notes/Git/Git/#_1","title":"\u8f6f\u4ef6\u7684\u5f00\u6e90\u8bb8\u53ef","text":""},{"location":"notes/Git/Git/#cccreative-commons","title":"CC\uff08Creative Commons\uff09","text":"<p>\u7528\u4e8e\u201c\u77e5\u8bc6\u5171\u4eab\u201d\uff0c\u4e0d\u7528\u4e8e\u8f6f\u4ef6</p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a\u6309\u7167 Github \u5b98\u65b9\u6587\u6863\u521b\u5efa\u8bb8\u53ef\u8bc1\u6587\u4ef6\uff0c\u9009\u62e9CC \u8bb8\u53ef\u8bc1\u5373\u53ef\u3002\u5982\u679c\u8981\u4f7f\u7528 CC \u7684\u6307\u5b9a\u7248\u672c\uff0c\u53ef\u4ee5\u76f4\u63a5\u5230CC \u5b98\u7f51\u83b7\u5f97\u8bb8\u53ef\u8bc1\u6587\u4ef6\uff0c\u7c98\u8d34\u5230 <code>LICENSE</code>\u6587\u4ef6\u4e2d\u5373\u53ef\u3002</p> <p>\u53ef\u80fd\u6bd4\u8f83\u5e38\u89c1\u7684\u7248\u672c\uff1a</p> <ul> <li>CC BY-SA\uff1a*ShareAlike\uff0c\u9700\u8981\u91c7\u7528\u76f8\u540c\u8bb8\u53ef\u8bc1</li> <li>CC BY\uff1aAttribution\uff0c\u9700\u8981\u6807\u660e\u539f\u4f5c\u8005</li> <li>CC 0\uff1aPublic Domain\uff0c\u8fdb\u5165\u516c\u5171\u9886\u57df</li> </ul> <p>reference:</p> <ul> <li>https://www.bilibili.com/video/BV12u4y177vG/?spm_id_from=333.999.0.0&amp;vd_source=fdd56007771480ca58f731c9abc561aa</li> </ul>"},{"location":"notes/assembly/","title":"\u5fae\u673a\u539f\u7406\u548c\u63a5\u53e3\u6280\u672f","text":"<p>Abstract</p> <p>\u8fd9\u95e8\u8bfe\u53ef\u4ee5\u770b\u4f5c\u662f\u8ba1\u7b97\u673a\u7ec4\u6210\u539f\u7406\u7684\u5b9e\u8df5\u548c\u62d3\u5c55\uff0c\u9700\u8981\u5b66\u4e60\u6c47\u7f16\u3002</p>"},{"location":"notes/assembly/#table-of-contents","title":"Table of Contents","text":"<ul> <li>assembly:  \u638c\u63e1\u6c47\u7f16\u7684\u8bed\u6cd5\u662f\u8003\u8bd5\u7684\u91cd\u70b9\u4e4b\u4e00\uff0c\u4e5f\u662f\u4e4b\u540e\u7684\u63a5\u53e3\u6280\u672f\u7684\u524d\u7f6e\u77e5\u8bc6</li> <li>\u5fae\u673a\u539f\u7406\u548c\u63a5\u53e3\u6280\u672f</li> </ul>"},{"location":"notes/assembly/assembly/","title":"Assembly","text":""},{"location":"notes/assembly/assembly/#8086-instruction-set","title":"8086 instruction set","text":"<p>8086 instructions (auburn.edu)</p>"},{"location":"notes/assembly/assembly/#vscode","title":"VScode\u914d\u7f6e\u8c03\u8bd5\u73af\u5883","text":"<ol> <li>\u5b89\u88c5\u63d2\u4ef6TASM/MASM</li> <li>\u53f3\u952e\u6269\u5c55\u8bbe\u7f6e\uff0c\u9009\u62e9Assembler\uff1aMASM</li> <li>\u53f3\u952e\u8c03\u8bd5\u5373\u53ef\u5f00\u59cb\u8c03\u8bd5\u4e86\uff01</li> </ol>"},{"location":"notes/assembly/assembly/#debugexe","title":"Debug.exe","text":"<p>R\u547d\u4ee4\uff1a\u67e5\u770b\u3001\u6539\u53d8CPU\u5bc4\u5b58\u5668\u7684\u5185\u5bb9  D\u547d\u4ee4\uff1a\u67e5\u770b\u5185\u5b58\u4e2d\u7684\u5185\u5bb9 T\u547d\u4ee4\uff1a\u6267\u884c\u4e00\u6761\u673a\u5668\u6307\u4ee4 G\u547d\u4ee4\uff1a\u4ece\u505c\u987f\u7684\u5730\u65b9\u8fd0\u884c\u5230\u5e95</p> <p>\u6ce8\u610f\uff01\uff01\uff01\uff01 x86\u67b6\u6784\u91c7\u7528\u5c0f\u7aef\u6cd5\uff0c\u65e0\u8bba\u662f\u5bc4\u5b58\u5668\u8fd8\u662f\u5185\u5b58\u4e2d\u6570\u636e\u7684\u4f4e\u4f4d\u5728\u5b58\u50a8\u5668\u5730\u5740\u7684\u4f4e\u4f4d\uff0c\u4f46\u662f\u901a\u5e38\u6765\u8bf4\u6211\u4eec\u8868\u793a\u5bc4\u5b58\u5668\u5de6\u8fb9\u662f\u9ad8\u4f4d\uff0c\u53f3\u8fb9\u662f\u4f4e\u4f4d\uff0c\u800c\u6211\u4eec\u8868\u793a\u5185\u5b58\u5de6\u8fb9\u662f\u4f4e\u4f4d\u53f3\u8fb9\u662f\u9ad8\u4f4d\u3002\u4f8b\u59821234h\u5728\u5185\u5b58\u4e2d\u663e\u793a3412\uff0c\u5728\u5bc4\u5b58\u5668\u4e2d\u663e\u793a1234</p>"},{"location":"notes/assembly/assembly/#hello-world","title":"\u7b2c\u4e00\u6bb5\u4ee3\u7801\uff1aHello World","text":"<pre><code>DSEG SEGMENT\n\u00a0 \u00a0 \u00a0 \u00a0 MESS DB 'Hello, World!',0DH,0AH,24H\nDSEG ENDS\n\nSSEG SEGMENT PARA STACK\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0DW 256 DUP(?)\nSSEG ENDS\n\nCSEG SEGMENT\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ASSUME CS:CSEG, DS:DSEG\n\u00a0 \u00a0 \u00a0 \u00a0 BEGIN:MOV \u00a0 \u00a0AX,DSEG\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0DS,AX\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0DX,OFFSET MESS\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0AH,9\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 INT \u00a0 \u00a021H\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0AH,4CH\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 INT \u00a0 \u00a021H\nCSEG ENDS\nEND BEGIN\n</code></pre>"},{"location":"notes/assembly/assembly/#_1","title":"\u5bc4\u5b58\u5668\u7b80\u4ecb","text":"<ul> <li>AX     16\u4f4d</li> <li>AH, AL 8\u4f4d</li> <li>EAX    32\u4f4d</li> </ul>"},{"location":"notes/assembly/assembly/#_2","title":"\u901a\u7528\u5bc4\u5b58\u5668","text":"<ul> <li><code>AX</code> \u7d2f\u52a0\u5668\uff1a\u548c\u4e58\u9664\u6709\u5173</li> <li><code>BX</code> \u57fa\u5730\u5740\u5bc4\u5b58\u5668</li> <li>\u57288086\u91cc\uff0c\u5185\u5b58\u4e2d\u7684\u5730\u5740BeLike\uff1a<code>204B:1001</code>\uff08\u4ee516\u8fdb\u5236\u8868\u793a\uff09<code>204B</code>\u662f\u6bb5\u5730\u5740\uff0c<code>1001</code>\u662f\u504f\u79fb\u5730\u5740\uff0c\u5404\u9700\u8981\u4e00\u4e2aWord\u8fdb\u884c\u5b58\u50a8</li> <li>BX\u7528\u4e8e\u5b58\u653e\u504f\u79fb\u5730\u5740</li> <li><code>CX</code> \u8ba1\u6570\u5668</li> <li><code>DX</code> \u6570\u636e\u5bc4\u5b58\u5668\uff1a</li> <li>\u7279\u6b8a\u529f\u80fd\u548cMUL/DIV\u6709\u5173\uff0c\u540e\u9762\u518d\u8bf4\uff1b\u4e5f\u6709\u4e0e\u8f93\u5165\u8f93\u51fa\u7684\u6682\u5b58\u6709\u5173\u7684\u529f\u80fd</li> </ul>"},{"location":"notes/assembly/assembly/#_3","title":"\u6307\u9488\u53d8\u5740\u5bc4\u5b58\u5668","text":"<ul> <li><code>SP</code>\u6808\u9876\u5730\u5740</li> <li><code>BP</code>\u548cBX\u6709\u7c7b\u4f3c\u7684\u7528\u6cd5\uff0c\u53ea\u662f\u4e00\u822c\u66f4\u503e\u5411\u4e8e\u7528\u5728\u5806\u6808\u7684\u6570\u636e\u91cc\uff0c<code>[BP]</code>\u9ed8\u8ba4\u4e3a<code>SS:[BP]</code></li> <li><code>SI</code>/<code>DI</code></li> <li><code>[SI]</code>\u9ed8\u8ba4\u4e3a<code>DS:[SI]</code>;\u5982\u679c\u8981\u8f6c\u79fb\u6570\u636e\uff0c\u503e\u5411\u4e8e\u7528SI\u5b58\u539f\u5730\u5740\uff0cDI\u5b58\u65b0\u5730\u5740</li> </ul>"},{"location":"notes/assembly/assembly/#_4","title":"\u6bb5\u5bc4\u5b58\u5668","text":"<ul> <li>CS \u4ee3\u7801\u6bb5\u5bc4\u5b58\u5668</li> <li>SS \u5806\u6808\u6bb5\u5bc4\u5b58\u5668</li> <li>DS\u3001ES\u3001FS\u3001GS \u6570\u636e\u6bb5\u5bc4\u5b58\u5668</li> </ul>"},{"location":"notes/assembly/assembly/#_5","title":"\u5728\u5b9e\u6a21\u5f0f\u4e0b\u7269\u7406\u5730\u5740\u7684\u5f62\u6210\u65b9\u5f0f","text":"<p>\u5728DOS\u4e2d\u6709\u5730\u5740\u7ebf20\u6839\uff0c\u4f46\u5bc4\u5b58\u5668\u90fd\u662f16\u4f4d\u7684\uff0c\u6240\u4ee5\u5c06\u5730\u5740\u5206\u4f4d\u6bb5\u57fa\u5740\u548c\u504f\u79fb\u5730\u5740\u5206\u522b\u5b58\u5165\u4e24\u4e2a\u5bc4\u5b58\u5668</p> <ul> <li>\u903b\u8f91\u5730\u5740 \\(1000H:2345H\\)</li> <li>\u7269\u7406\u5730\u5740 \\(1000H \\times 16 + 2345H = 12345H\\)</li> </ul>"},{"location":"notes/assembly/assembly/#flag","title":"\u6807\u5fd7\u5bc4\u5b58\u5668 FLAG","text":"<p>\u53ea\u662f\u5199\u4ee3\u7801\u7684\u8bdd\u4e0d\u7528\u7ba1\u5b83 16\u4f4d\u5206\u5f00\u4f7f\u7528\uff0c\u6709\u5404\u81ea\u4e0d\u540c\u7684\u610f\u601d\uff0c\u7ed3\u679c\u4f1a\u4ee5\u4e0b\u9762\u7684\u5f62\u5f0f\u5448\u73b0\u5728-R\u4e2d</p> <p>\u5728Debuger\u4e2d\u7684\u6807\u5fd7\u4f4d\u5bf9\u7167\u8868</p> <p></p> <ol> <li>\u8fdb\u4f4d\u6807\u5fd7\u4f4d\uff08CF\uff0cCarry Flag\uff09\uff1a</li> </ol> <p>\u8fdb\u4f4d\u6807\u5fd7\u4f4d\u7528\u4e8e\u5904\u7406\u65e0\u7b26\u53f7\u6570\u7684\u8fdb\u4f4d\u548c\u501f\u4f4d\u3002\u5982\u679c\u6700\u8fd1\u7684\u64cd\u4f5c\u5bfc\u81f4\u8fdb\u4f4d\uff08\u5982\u52a0\u6cd5\u4e2d\u7684\u8fdb\u4f4d\u6216\u51cf\u6cd5\u4e2d\u7684\u501f\u4f4d\uff09\uff0c\u5219\u6b64\u6807\u5fd7\u4f4d\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u5426\u5219\u4e3a0\u3002</p> <ol> <li>\u96f6\u6807\u5fd7\u4f4d\uff08ZF\uff0cZero Flag\uff09\uff1a</li> </ol> <p>\u96f6\u6807\u5fd7\u4f4d\u8868\u793a\u6700\u8fd1\u7684\u64cd\u4f5c\u662f\u5426\u4ea7\u751f\u4e86\u96f6\u503c\u7ed3\u679c\u3002\u5982\u679c\u7ed3\u679c\u4e3a\u96f6\uff0c\u5219\u6b64\u6807\u5fd7\u4f4d\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u5426\u5219\u4e3a0\u3002</p> <ol> <li>\u7b26\u53f7\u6807\u5fd7\u4f4d\uff08SF\uff0cSign Flag\uff09\uff1a</li> </ol> <p>\u7b26\u53f7\u6807\u5fd7\u4f4d\u8868\u793a\u6700\u8fd1\u7684\u64cd\u4f5c\u7ed3\u679c\u7684\u7b26\u53f7\u3002\u5982\u679c\u7ed3\u679c\u4e3a\u8d1f\u6570\uff0c\u5219\u6b64\u6807\u5fd7\u4f4d\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u5426\u5219\u4e3a0\u3002</p> <ol> <li>\u6ea2\u51fa\u6807\u5fd7\u4f4d\uff08OF\uff0cOverflow Flag\uff09\uff1a</li> </ol> <p>\u6ea2\u51fa\u6807\u5fd7\u4f4d\u7528\u4e8e\u68c0\u6d4b\u6709\u7b26\u53f7\u6570\u8fd0\u7b97\u7684\u6ea2\u51fa\u3002\u5982\u679c\u6700\u8fd1\u7684\u64cd\u4f5c\u5bfc\u81f4\u7ed3\u679c\u6ea2\u51fa\uff0c\u6b64\u6807\u5fd7\u4f4d\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u5426\u5219\u4e3a0\u3002</p> <ol> <li>\u5947\u5076\u6807\u5fd7\u4f4d\uff08PF\uff0cParity Flag\uff09\uff1a</li> </ol> <p>\u5947\u5076\u6807\u5fd7\u4f4d\u8868\u793a\u7ed3\u679c\u4e2d\u5305\u542b\u7684 1 \u7684\u4f4d\u6570\u662f\u5426\u4e3a\u5076\u6570\u3002\u5982\u679c\u4f4d\u6570\u4e3a\u5076\u6570\uff0c\u5219\u6b64\u6807\u5fd7\u4f4d\u88ab\u8bbe\u7f6e\u4e3a1\uff0c\u5426\u5219\u4e3a0\u3002\u7528\u4e8e\u5947\u5076\u6027\u68c0\u6d4b\u3002</p> <ol> <li>\u8f85\u52a9\u8fdb\u4f4d\u6807\u5fd7\u4f4d\uff08AF\uff0cAuxiliary Carry Flag\uff09\uff1a</li> </ol> <p>\u8f85\u52a9\u8fdb\u4f4d\u6807\u5fd7\u4f4d\u7528\u4e8e\u5904\u7406 BCD\uff08\u4e8c\u8fdb\u5236\u7f16\u7801\u7684\u5341\u8fdb\u5236\uff09\u7b97\u6cd5\u3002\u5b83\u5728\u4e8c\u8fdb\u5236\u6570\u7684\u4f4e 4 \u4f4d\u4e0e\u9ad8 4 \u4f4d\u4e4b\u95f4\u7684\u8fdb\u4f4d\u548c\u501f\u4f4d\u64cd\u4f5c\u4e2d\u53d1\u6325\u4f5c\u7528\u3002</p> <ol> <li>\u63a7\u5236\u6807\u5fd7\u4f4d\uff08TF\uff0cTrap Flag\uff09\uff1a</li> </ol> <p>\u63a7\u5236\u6807\u5fd7\u4f4d\u901a\u5e38\u7528\u4e8e\u8c03\u8bd5\u76ee\u7684\u3002\u5f53 TF \u88ab\u8bbe\u7f6e\u4e3a1 \u65f6\uff0c8086 \u5904\u4e8e\u5355\u6b65\u6267\u884c\u6a21\u5f0f\uff0c\u6bcf\u6267\u884c\u4e00\u6761\u6307\u4ee4\u540e\u4f1a\u5f15\u53d1\u4e00\u4e2a\u4e2d\u65ad\uff0c\u7528\u4e8e\u7a0b\u5e8f\u5458\u8c03\u8bd5\u3002</p> <ol> <li>\u4e2d\u65ad\u5141\u8bb8\u6807\u5fd7\u4f4d\uff08IF\uff0cInterrupt Enable Flag\uff09\uff1a</li> </ol> <p>\u4e2d\u65ad\u5141\u8bb8\u6807\u5fd7\u4f4d\u7528\u4e8e\u63a7\u5236\u5916\u90e8\u4e2d\u65ad\u7684\u5904\u7406\u3002\u5982\u679c IF \u88ab\u8bbe\u7f6e\u4e3a1\uff0cCPU \u5141\u8bb8\u5916\u90e8\u4e2d\u65ad\uff1b\u5982\u679c\u88ab\u8bbe\u7f6e\u4e3a0\uff0cCPU \u7981\u7528\u5916\u90e8\u4e2d\u65ad\u3002</p> <ol> <li>\u65b9\u5411\u6807\u5fd7\u4f4d\uff08DF\uff0cDirection Flag\uff09\uff1a</li> </ol> <p>\u65b9\u5411\u6807\u5fd7\u4f4d\u7528\u4e8e\u6307\u793a\u5b57\u7b26\u4e32\u64cd\u4f5c\uff08\u5982\u5b57\u7b26\u4e32\u590d\u5236\uff09\u7684\u65b9\u5411\u3002\u5f53 DF \u88ab\u8bbe\u7f6e\u4e3a1 \u65f6\uff0c\u5b57\u7b26\u4e32\u64cd\u4f5c\u5411\u4f4e\u5730\u5740\u65b9\u5411\u79fb\u52a8\uff1b\u5f53\u88ab\u8bbe\u7f6e\u4e3a0 \u65f6\uff0c\u5411\u9ad8\u5730\u5740\u65b9\u5411\u79fb\u52a8\u3002</p>"},{"location":"notes/assembly/assembly/#_6","title":"\u57fa\u7840\u8bed\u6cd5","text":""},{"location":"notes/assembly/assembly/#_7","title":"\u5bfb\u5740","text":"<ol> <li>\u7acb\u5373\u5bfb\u5740</li> </ol> <p>\u76f4\u63a5\u5199\u64cd\u4f5c\u6570</p> <pre><code>MOV AX, 1234H\n</code></pre> <ol> <li>\u76f4\u63a5\u5bfb\u5740</li> </ol> <p>\u64cd\u4f5c\u6570\u5728\u5185\u5b58\u5355\u5143\uff0c\u76f4\u63a5\u5199\u64cd\u4f5c\u6570\u6240\u5728\u5730\u5740</p> <pre><code>MOV AX, DS:[1234H]\n; \u76f4\u63a5\u5199\u53d8\u91cf\u540d\nMOV AL, BUF\n</code></pre> <ol> <li> <p>\u5bc4\u5b58\u5668\u5bfb\u5740    <pre><code>MOV AL, AH\n</code></pre></p> </li> <li> <p>\u5bc4\u5b58\u5668\u95f4\u63a5\u5bfb\u5740</p> </li> </ol> <p>\u64cd\u4f5c\u6570\u5728\u5185\u5b58\u5355\u5143\uff0c\u8be5\u5355\u5143\u7684\u6bb5\u57fa\u5740\u5728\u6bb5\u5bc4\u5b58\u5668\u4e2d, \u6709\u6548\u5730\u5740\u5728\u95f4\u5740\u5bc4\u5b58\u5668\u4e2d</p> <ul> <li>BP\u53ef\u4f5c\u4e3a\u95f4\u5740\u5bc4\u5b58\u5668\u8bbf\u95ee\u5806\u6808\u6bb5</li> <li>BX\uff0cSI\uff0cDI\u53ef\u4f5c\u4e3a\u95f4\u5740\u5bc4\u5b58\u5668\u8bbf\u95ee\u6570\u636e\u6bb5</li> </ul> <pre><code>MOV AX, [BX]\nMOV AX , DS:[BX] ; \u4e0e\u4e0a\u9762\u7b49\u4ef7\n</code></pre> <ol> <li>\u57fa\u5740\u5bfb\u5740</li> </ol> <p>\u8be5\u5bfb\u5740\u65b9\u5f0f\u7684\u6709\u6548\u5730\u5740\u7531\u4e24\u90e8\u5206\u7ec4\u6210\u3002\u4e00\u90e8\u5206\u5728\u57fa\u5740\u5bc4\u5b58\u5668\u4e2d\uff0c\u53e6\u4e00\u90e8\u5206\u4e3a\u5e38\u91cf</p> <ul> <li>BP\u53ef\u4f5c\u4e3a\u57fa\u5740\u5bc4\u5b58\u5668\u8bbf\u95ee\u5806\u6808\u6bb5</li> <li>BX\u53ef\u4f5c\u4e3a\u57fa\u5740\u5bc4\u5b58\u5668\u8bbf\u95ee\u6570\u636e\u6bb5</li> </ul> <pre><code>MOV AL, [BX + 3]\n</code></pre> <ol> <li> <p>\u53d8\u5740\u5bfb\u5740\u3001</p> </li> <li> <p>\u6709\u6bd4\u4f8b\u56e0\u5b50\u7684\u53d8\u5740\u5bfb\u5740\u5176\u5730\u5740\u8868\u8fbe\u5f0f<code>\u6bb5\u5bc4\u5b58\u5668\uff1a[\u6bd4\u4f8b\u56e0\u5b50*\u53d8\u5740\u5bc4\u5b58\u5668+\u4f4d\u79fb\u91cf]</code></p> <ul> <li>\u6bd4\u4f8b\u56e0\u5b50\u53ea\u80fd\u662f1\u30012\u30014\u30018</li> <li>\u6709\u6bd4\u4f8b\u56e0\u5b50\u7684\u53ea\u80fd\u662f32\u4f4d\u5bfb\u5740\uff0c\u8bbf\u95ee\u5806\u6808\u7528EBP\uff0c\u8bbf\u95ee\u6570\u636e\u7528EAX\u7b49\uff0cESI\uff0cEDI</li> </ul> </li> <li>\u6ca1\u6709\u6bd4\u4f8b\u56e0\u5b50\u7684\u53d8\u5740\u5bfb\u5740\u5176\u5730\u5740\u8868\u8fbe\u5f0f<code>\u6bb5\u5bc4\u5b58\u5668\uff1a[\u53d8\u5740\u5bc4\u5b58\u5668+\u4f4d\u79fb\u91cf]</code><ul> <li>SI, DI\u4f5c\u4e3a\u65e0\u6bd4\u4f8b\u56e0\u5b50\u768416\u4e3a\u7f16\u5740\u5bc4\u5b58\u5668\u53ef\u4ee5\u8bbf\u95ee\u6570\u636e\u6bb5</li> </ul> </li> </ol> <pre><code>;\u6709\u6bd4\u4f8b\u56e0\u5b50\nMOV AH, [4 * EBX + 3]\n;\u65e0\u6bd4\u4f8b\u56e0\u5b50\nMOV AH, [SI + 3]\n</code></pre> <ol> <li>\u57fa\u5740+\u53d8\u5740\u5bfb\u5740    <pre><code>MOV AL,[BX+SI+0250H]\n</code></pre></li> </ol> <p>\u6ce8\u610f\uff1a</p> <ol> <li>\u5728\u5b9e\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u903b\u8f91\u6bb5\u7684\u4f53\u79ef\u6700\u5927\u4e3a64K\uff0c\u5b58\u50a8\u5355\u5143\u7684\u6709\u6548\u5730\u5740\u4e3a16\u4f4d\uff0c\u5728\u5b9e\u6a21\u5f0f\u4e0b\u8fd0\u884c\u7684\u7a0b\u5e8f\u901a\u5e38\u91c7\u752816\u4f4d\u5bfb\u5740</li> <li>\u5982\u7528BP\u3001EBP\u3001ESP\u53c2\u4e0e\u5bfb\u5740\uff0cCPU\u81ea\u52a8\u8ba4\u4e3a\u662f\u8bbf\u95ee\u5806\u6808\u6bb5\uff0c\u5806\u6808\u6bb5\u57fa\u5740SS\u5728\u5bfb\u5740\u65f6\u53ef\u4ee5\u7701\u7565</li> <li>\u5982\u7528BX\u3001SI\u3001DI\u3001EAX\uff5eEDX\u3001ESI\u3001EDI\u53c2\u4e0e\u5bfb\u5740, CPU\u81ea\u52a8\u8ba4\u4e3a\u662f\u8bbf\u95ee\u6570\u636e\u6bb5\uff0cDS\u5728\u5bfb\u5740\u65f6\u53ef\u4ee5\u7701\u7565</li> </ol>"},{"location":"notes/assembly/assembly/#_8","title":"\u53d8\u91cf\u7684\u5b9a\u4e49","text":"<pre><code>BUF1 DB 0A1H, 64, 01010101B, 'A', 'hello'\n</code></pre> <pre><code>BUF2 DB 3 DUP(?)     ; equal to BUF2 DB ?,?,?\nBUF3 DB 3 DUP(0FFH)\n</code></pre> <pre><code>BUF4 DW 1234H,56, 'AB', 'C'\nBUF5 DW 2 DUP(?)\nBUF6 DW 2 DUP(0FFH)\n</code></pre> <p>\u4e00\u4e9b\u4f2a\u6307\u4ee4</p> <ul> <li> <p><code>NUM EQU 33</code>\u5b9a\u4e49\u7b26\u53f7\u5e38\u6570NUM\u7684\u503c\u4e3a33\uff0c\u5176\u503c\u5728\u540e\u7ee7\u8bed\u53e5\u4e2d\u4e0d\u80fd\u66f4\u6539</p> </li> <li> <p><code>NUM = 33</code>\u5b9a\u4e49\u7b26\u53f7\u5e38\u6570NUM\u7684\u503c\u4e3a33\uff0c\u5176\u503c\u5728\u540e\u7ee7\u8bed\u53e5\u4e2d\u53ef\u4ee5\u66f4\u6539</p> </li> <li> <p><code>assembly   BUF  DB  'THE QUICK BROWN FOX'  ;\u5b57\u7b26\u4e32\u957f\u5ea619   LLL  EQU $-BUF                  ; LLL = 19</code></p> </li> <li> <p>SEG\u8fd0\u7b97\u7b26: \u8ba1\u7b97\u67d0\u4e00\u903b\u8f91\u6bb5\u7684\u6bb5\u57fa\u5740</p> </li> </ul> <pre><code>MOV AX, SEG  DATA\nMOV DS, AX\n</code></pre> <ul> <li> <p>OFFSET\u8fd0\u7b97\u7b26 &amp; LEA\u6307\u4ee4: \u7b97\u51fa\u903b\u8f91\u6bb5\u4e2d\u67d0\u4e2a\u53d8\u91cf\u6216\u6807\u53f7\u540d\u6240\u5728\u5355\u5143\u76f8\u5bf9\u4e8e\u6bb5\u9996\u7684\u504f\u79fb\u5730\u5740\u3002\u4e24\u8005\u5728\u529f\u80fd\u4e0a\u76f8\u540c\uff0c\u4f46\u662fLEA\u662f\u4e00\u79cd\u8ba1\u7b97\u6307\u4ee4\uff0c\u7528\u4e8e\u8ba1\u7b97\u504f\u79fb\u5730\u5740\uff0cOFFSET\u662f\u4f2a\u6307\u4ee4\uff0c\u662f\u7531\u6c47\u7f16\u5b8c\u6210\u7684\uff0c\u4e0d\u662fISA\u89c4\u5b9a\u7684\u6307\u4ee4</p> <pre><code>MOV  BX\uff0cOFFSET  BUF\nMOV  AL\uff0c[BX]                  \n\n;\u7b49\u4ef7\u4e8e\nLEA  BX\uff0cBUF\nMOV  AL\uff0c[BX]\n</code></pre> </li> <li> <p>PTR\u7684\u4f7f\u7528\u8981\u6c42\uff1a</p> </li> <li> <p>\u6307\u4ee4\u7684\u64cd\u4f5c\u6570\u81f3\u5c11\u6709\u4e00\u4e2a\u7c7b\u578b\u5c5e\u6027\u8981\u786e\u5b9a\uff0c\u5426\u5219\u5fc5\u987b\u7528PTR\u8fd0\u7b97\u7b26\u8bf4\u660e\u5176\u4e2d\u7684\u5185\u5b58\u64cd\u4f5c\u6570\u7684\u7c7b\u578b</p> </li> <li>\u82e5\u4e24\u4e2a\u64cd\u4f5c\u6570\u7684\u7c7b\u578b\u5c5e\u6027\u90fd\u786e\u5b9a\uff0c\u5219\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\u3002\u5426\u5219\u5fc5\u987b\u7528PTR\u8fd0\u7b97\u7b26\u6539\u53d8\u5176\u4e2d\u7684\u5185\u5b58\u64cd\u4f5c\u6570\u7684\u7c7b\u578b\uff0c\u4ee5\u4fdd\u6301\u524d\u540e\u5c5e\u6027\u4e00\u81f4\u3002</li> </ul> <pre><code>BUF DB 11,22,33\n\nMOV AX, BUF          ; ERROR\nMOV AX, WORD PTR BUF ; AH=22, AL=11\nMOV WORD PTR BUF, 4455H ; BUF = 55H, 44H, 33\n</code></pre>"},{"location":"notes/assembly/assembly/#_9","title":"\u7a0b\u5e8f\u7684\u57fa\u672c\u67b6\u6784","text":"<ol> <li>\u7b14\u8bd5\u7248\u672c\uff1a\u8003\u8bd5\u7684\u5199\u6cd5</li> </ol> <pre><code>.586\ndata segment USE16\n; more datas\ndata ends\n\ncode segment USE16\n       assume cs:code, ds:data\n  beg: mov    ax, data\n       mov    ds, ax\n       ; more codes\n       mov    ah, 4ch\n       int    21h\n\ncode ends\nend beg\n</code></pre> <ol> <li>\u4ee3\u7801\u7248\u672c\uff1a\u5199\u4ee3\u7801\u8fd0\u884c\u7684\u7b80\u5316\u5199\u6cd5</li> </ol> <pre><code>DATA SEGMENT\n; more datas\nDATA ENDS\n\nSTACK SEGMENT\nSTACK ENDS\n\nCODE SEGMENT\n       ASSUME DS:DATA,SS:STACK,CS:CODE\n  MAIN:\n       MOV    AX,DATA\n       MOV    DS,AX\n       ; more codes\n       MOV    AH,4CH\n       INT    21H\nCODE ENDS\nEND MAIN \n</code></pre>"},{"location":"notes/assembly/assembly/#_10","title":"\u5e38\u7528\u6307\u4ee4","text":""},{"location":"notes/assembly/assembly/#_11","title":"\u56db\u5219\u8fd0\u7b97","text":"<pre><code>;\u4e0d\u8003\u8651\u8fdb\u4f4d\u548c\u501f\u4f4d\nADD AX,X    ;AX+=X\nSUB AX,X    ;AX-=X\n\n;\u8003\u8651\u8fdb\u4f4d\u548c\u501f\u4f4d\nADC AX,X\nSBB AX,X\n\nINC AX      ;AX++\nDEC AX      ;AX--\n\nNEG AX      ;\u53d6\u8d1f \n</code></pre> <ul> <li><code>CMP \u76ee\u6807\u64cd\u4f5c\u6570\uff0c\u6e90\u64cd\u4f5c\u6570</code>\u5c06\u76ee\u6807\u64cd\u4f5c\u6570\u51cf\u53bb\u6e90\u64cd\u4f5c\u6570\uff0c\u5e76\u4fee\u6539\u6807\u5fd7\u5bc4\u5b58\u5668\uff0c\u4e24\u4e2a\u64cd\u4f5c\u6570\u4e0d\u53d8</li> </ul>"},{"location":"notes/assembly/assembly/#_12","title":"\u64cd\u4f5c\u6570\u4e92\u6362","text":"<p><code>XCHG</code> \u4e24\u4e2a\u64cd\u4f5c\u6570\u4e92\u6362</p> <pre><code>MOV    AX, 42                      ; \u5c06AX\u5bc4\u5b58\u5668\u7684\u503c\u8bbe\u7f6e\u4e3a42\nMOV    BX, 99                      ; \u5c06BX\u5bc4\u5b58\u5668\u7684\u503c\u8bbe\u7f6e\u4e3a99\n\nXCHG   AX, BX                      ; \u4f7f\u7528XCHG\u6307\u4ee4\u4ea4\u6362AX\u548cBX\u7684\u503c\n</code></pre>"},{"location":"notes/assembly/assembly/#_13","title":"\u903b\u8f91\u8fd0\u7b97","text":"<pre><code>MOV    AX, 0FFFFH\nNOT    AX\n; AX == 0000H\n\nMOV    AX, 0FFFFH\nMOV    BX, 0FF00H\nAND    AX, BX\n; AX == FF00H\n\nMOV    AX, 0FFFFH\nMOV    BX, 0FF00H\nXOR    AX, BX\n; AX == 00FFH\n\nMOV    AX, 0FFFFH\nMOV    BX, 0FF00H\nOR     AX, BX\n; AX == FFFFH\n\n; test\u5c06\u4e24\u4e2a\u64cd\u4f5c\u6570\u6309\u4f4d\u4e0e\uff0c\u5e76\u5c06\u7ed3\u679c\u66f4\u65b0\u5230Z\u6807\u5fd7\u4f4d\n; \u5982\u679cax\u7684D_0\u4f4d\u662f1\uff0c\u8df3\u8f6c\u5230NEXT\nTEST AX, 0001H\nJNZ NEXT\n</code></pre> <p>\u57288086\u4e2d\uff0c\u5341\u516d\u8fdb\u5236\u7684\u4e66\u5199\u683c\u5f0f\u662f0...H\uff0c\u5f00\u5934\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a0\uff0c\u4f8b\u5982FFFF\u5e94\u8be5\u5199\u62100FFFFH</p> <ol> <li>\u53d6\u53cd\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u5f02\u6216<code>XOR AH\uff0c0F0H</code>\u53ef\u4ee5\u5b9e\u73b0\u9ad84\u4f4d\u53d6\u53cd</li> <li>\u6e05\u96f6\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528<code>XOR AX,AX</code>\uff0c\u7f6e\u96f6\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528<code>AND AX 00H</code>\u5b9e\u73b0\u4f4e8\u4f4d\u7f6e\u96f6</li> <li>\u7f6e1\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u7528\u4e0e1</li> </ol>"},{"location":"notes/assembly/assembly/#_14","title":"\u79fb\u4f4d\u6307\u4ee4","text":"<p>\u6240\u6709\u6570\u636e\u4ee5\u8865\u7801\u8bba\u5904</p> <ul> <li>\u7b97\u6570\u4f4d\u79fb\u9002\u7528\u4e8e\u5e26\u7b26\u53f7\u6570\u7684\u8fd0\u7b97\uff1aShift Arithmetic -&gt; SAL, SAR</li> <li>\u7b97\u6570\u5de6\u79fb\u5728\u4f4e\u4f4d\u88650\uff0c\u9700\u8981\u8003\u8651\u6ea2\u51fa\u7684\u95ee\u9898\uff08\u5224\u65ad\u7b26\u53f7\u4f4d\u548c\u6700\u9ad8\u6570\u636e\u4f4d\u662f\u5426\u4e00\u81f4\uff09\uff0c\u5728\u79fb\u52a8\u591a\u4f4d\u7684\u65f6\u5019\u53c2\u89c18086 IS</li> <li> <p>\u7b97\u6570\u53f3\u79fb\u5728\u9ad8\u4f4d\u8865\u539f\u5148\u7684\u7b26\u53f7\u4f4d</p> </li> <li> <p>\u903b\u8f91\u4f4d\u79fb\u9002\u7528\u4e8e\u65e0\u7b26\u53f7\u6570\u7684\u8fd0\u7b97\uff1aShift            -&gt; SHL, SHR</p> </li> <li> <p>\u76f4\u63a5\u88650</p> </li> <li> <p>\u5faa\u73af\u4f4d\u79fb -&gt; ROL ROR</p> </li> <li> <p>\u5e26\u8fdb\u4f4d\u7684\u5faa\u73af\u4f4d\u79fb -&gt; RCL, </p> </li> </ul> <p>\u4f4d\u79fb\u6307\u4ee4\u7684\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u6570\u8981\u4e48\u662f1\uff0c\u8981\u4e48\u662f\u5bc4\u5b58\u5668CL</p> <pre><code>; \u7b97\u6570\u5de6\u79fb\u5728\u5f62\u5f0f\u4e0a\u548c\u903b\u8f91\u5de6\u79fb\u4e00\u81f4\uff0cSHL\u548cSAL\u662f\u4e00\u81f4\u7684\nmov    ax, 8CCCH ; 8CCCH\u7684\u7b26\u53f7\u4f4d\u548c\u6700\u9ad8\u6570\u636e\u4f4d\u4e0d\u4e00\u81f4\uff0c\u6ea2\u51fa\nmov    cl, 1\nshl    ax, cl    ; ax=9998 OF=1\n\nmov    ax, 8CCCH \nmov    cl, 4         ; \nshl    ax, cl        ; ax=CCC0H OF=0 \u4f4d\u79fb\u524d\u540e\u7b26\u53f7\u4f4d\u6ca1\u6709\u6539\u53d8\uff0c\u4e0d\u6ea2\u51fa\n\n\n; \u7b97\u6570\u53f3\u79fb\u5728\u9ad8\u4f4d\u8865\u539f\u5148\u7684\u7b26\u53f7\u4f4d\nMOV     AL, 0E0H      ; AL = 11100000b\nSAR     AL, 1         ; AL = 11110000b,  CF=0.\n\nMOV     BL, 4CH       ; BL = 01001100b\nSAR     BL, 1         ; BL = 00100110b,  CF=0.\n\n; \u5faa\u73af\u4f4d\u79fb\nmov ax, 1234H\nmov cl, 4\nrol ax, cl ; ax=2341H\n\nmov ax, 1234H\nmov cl, 4\nror ax, cl ; ax=4123H\n</code></pre>"},{"location":"notes/assembly/assembly/#loop","title":"Loop","text":"<pre><code>MOV    AX, 0                       ; \u521d\u59cb\u5316AX\u4e3a0\nMOV    CX, 10                      ; \u8bbe\u7f6e\u5faa\u73af\u6b21\u6570\uff0c\u8fd9\u91cc\u4e3a10\u6b21\n\n; \u5faa\u73af\u5f00\u59cb\nLOOP_START:\n     ADD    AX, 1                  ; \u5c06AX\u5bc4\u5b58\u5668\u7684\u503c\u52a01\n     LOOP   LOOP_START             ; \u5faa\u73af\uff0cCX\u51cf1\uff0c\u76f4\u5230CX\u4e3a\u96f6\n</code></pre>"},{"location":"notes/assembly/assembly/#jump","title":"jump","text":""},{"location":"notes/assembly/assembly/#_15","title":"\u65e0\u6761\u4ef6\u8df3\u8f6c","text":"<p>\u4e00\u6bb5\u4ee3\u7801\u53ef\u4ee5\u62e5\u6709label\uff0cJump NAME \u5373\u53ef\u8df3\u8f6c\u81f3label\u4f4d\u7f6e \u6bd4\u5982</p> <pre><code>MAIN\uff1aMOV X,AX\nJUMP DONE\nMOV AX,Y\n...\nDONE:\n    MOV AH, 4CH\n    INT 21\n</code></pre> <p>\u5728\u8fd9\u6bb5\u7a0b\u5e8f\u4e2d\uff0c<code>MOV AX,Y</code>\u5c31\u4f1a\u76f4\u63a5\u88ab\u8df3\u8fc7</p>"},{"location":"notes/assembly/assembly/#cx","title":"\u6839\u636eCX\u5bc4\u5b58\u5668\u7684\u503c\u8df3\u8f6c","text":"<pre><code>JCXZ ; if CX is 0, jump\n</code></pre>"},{"location":"notes/assembly/assembly/#_16","title":"\u6839\u636e\u6807\u5fd7\u5bc4\u5b58\u5668\u8df3\u8f6c","text":"<p>\u4f7f\u7528\u65e0\u7b26\u53f7\u6570\u6bd4\u8f83</p> <p></p> <p>\u4f7f\u7528\u6709\u7b26\u53f7\u6570\u6bd4\u8f83</p> <p></p>"},{"location":"notes/assembly/assembly/#stack","title":"stack","text":""},{"location":"notes/assembly/assembly/#_17","title":"\u521d\u59cb\u5316","text":""},{"location":"notes/assembly/assembly/#_18","title":"\u6bd4\u8f83\u76f4\u89c2\u7684\uff08\u5806\u6808\u6bb5\u4e2d\u505a\u5b9a\u4e49\uff09","text":"<ol> <li>\u5728\u5806\u6808\u6bb5\u5212\u5206\u4f4d\u7f6e\uff0c\u4fdd\u5b58\u6808\u9876\u4f4d\u7f6e</li> <li>\u5728\u7a0b\u5e8f\u6bb5\u5f00\u59cb\u7684\u65f6\u5019\u628a\u5806\u6808\u6bb5\u7684\u4f4d\u7f6e\u544a\u8bc9\u5806\u6808\u5bc4\u5b58\u5668SS\uff0c\u628a\u6808\u9876\u7684\u4f4d\u7f6e\u544a\u8bc9\u6307\u9488\u5bc4\u5b58\u5668SP</li> </ol> <pre><code>DSEG SEGMENT\nDSEG ENDS\n\nSSEG SEGMENT\n  STACK DW 128 dup(?)\n  TOP   DW LENGTH STACK\nSSEG ENDS\n\nCSEG SEGMENT\n       ASSUME CS:CSEG, DS:DSEG, SS:SSEG\n  MAIN:\n       MOV    AX, DSEG\n       MOV    DS, AX\n       MOV    AX, SSEG\n       MOV    SS, AX\n       MOV    AX, TOP\n       MOV    SP, AX\n\n\n       MOV    AH,4CH\n       INT    21H\nCSEG ENDS\nEND MAIN\n</code></pre> <ul> <li> <p>\u6808\u5e95\u5728\u5185\u5b58\u9ad8\u4f4d\uff0c\u6808\u9876\u5728\u5185\u5b58\u4f4e\u4f4d</p> </li> <li> <p>\u6808\u7a7a\u95f4\u5730\u5740\u5bc4\u5b58\u5668<code>SS</code>\uff0c\u6808\u9876\u5730\u5740\u5bc4\u5b58\u5668<code>SP</code></p> </li> </ul> <p></p> <p>\u521b\u5efa\u4e86\u4e00\u4e2a\u6700\u5927\u4e3a<code>0100H</code>\u7684\u7c7b\u578b\u4e3a\u5b57\u7684\u6808\uff0c\u5219\u4ee4<code>SP</code>\u521d\u59cb\u5316\u4e3a<code>0100H</code>\uff0c\u5728push\u4e4b\u540eSP-2\u4e86\u4e24\u6b21\uff0c\u5728\u8fd9\u91ccpush\u4e86<code>1234H</code>\u548c<code>2345H</code></p>"},{"location":"notes/assembly/assembly/#_19","title":"\u7a0d\u5fae\u6ca1\u90a3\u4e48\u76f4\u89c2\u7684\uff08\u7a0b\u5e8f\u6bb5\u4e2d\u5212\u7a7a\u95f4\uff09","text":"<p>\u76f4\u63a5\u7ed9SP\u8d4b\u503c\uff0c\u5c3d\u91cf\u4e0d\u7528</p> <pre><code>SSEG SEGMENT\nSSEG ENDS\n;ss:0000-ss:1000\nCSEG SEGMENT\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ASSUME CS:CSEG, DS:DSEG,SS:SSEG\n\u00a0 \u00a0 \u00a0 BEGIN:MOV \u00a0 \u00a0AX,DSEG\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0DS,AX\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0AX,SSEG\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0SS,AX\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MOV \u00a0 \u00a0SP,1000H \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0;\u624b\u52a8\u89c4\u5b9a\u4e861000H\u7684\u7a7a\u7f6e\u7a7a\u95f4(OFFSET 0H-1000H)\n</code></pre>"},{"location":"notes/assembly/assembly/#pushpop","title":"PUSH\u548cPOP","text":"<p>push\u548cpop\u7528\u4e8e16\u4f4d\u548c32\u4f4d\u6570\u636e\u7684\u51fa\u5165\u6808\uff0c\u6839\u636e\u64cd\u4f5c\u6570\u7684\u4f4d\u6570\u51b3\u5b9a\uff0c\u6bcf\u6b21SP +- 2\u62164</p>"},{"location":"notes/assembly/assembly/#pushapopa","title":"PUSHA\u548cPOPA","text":"<p>\u5c06\u901a\u7528\u5bc4\u5b58\u5668\u548c\u6307\u9488\u53d8\u5740\u5bc4\u5b58\u5668\u7684\u503c\u5165\u6808\uff0c\u4fdd\u62a4\u73b0\u573a\uff0c\u53ef\u4ee5\u4f9d\u6b21\u5c06AX,CX,DX,BX,SP,BP,SI,DI\u51fa\u5165\u6808</p>"},{"location":"notes/assembly/assembly/#spbp","title":"\u7528SP\u548cBP\u64cd\u4f5c\u5806\u6808","text":"<p>\u5728\u4e3b\u7a0b\u5e8f\u53ea\u662f\u6682\u5b58\u6570\u636e\u7528\u7684\u8bdd\uff0c\u4e00\u822c==\u4e0d\u7528==\u64cd\u4f5c\u6307\u9488 \u4f46\u662f\uff0c\u7531\u4e8ePROC\u9700\u8981\u4f7f\u7528\u5230\u5806\u6808\u6bb5\uff0c\u6240\u4ee5\u8fd9\u662f\u64cd\u4f5c\u6307\u9488\u5c31\u662f\u5fc5\u8981\u7684\uff0c\u63a5\u4e0b\u6765\u5728PROC\u4e2d\u89e3\u91ca</p>"},{"location":"notes/assembly/assembly/#bios","title":"BIOS\u529f\u80fd\u8c03\u7528","text":"<p>BIOS \u952e\u76d8\u8f93\u5165\u529f\u80fd\u8c03\u7528\u4e2d\u65ad\u53f716H\uff0c\u5c4f\u5e55\u529f\u80fd\u8c03\u752810H</p>"},{"location":"notes/assembly/assembly/#01h","title":"\u529f\u80fd\u53f701H:\u67e5\u8be2\u952e\u76d8\u7f13\u51b2\u533a","text":"<p>\u51fa\u53e3\u53c2\u6570\uff1a</p> <ol> <li>Z\u6807\u5fd7 = 0\uff0c\u6709\u8f93\u5165\uff0c\u952e\u4ee3\u7801\u4fdd\u5b58\u5728\u952e\u76d8\u7f13\u51b2\u533a\uff0cAL=\u8f93\u5165\u5b57\u7b26\uff0cAH=\u8f93\u5165\u5b57\u7b26\u7684\u6269\u5c55\u7801</li> <li>Z\u6807\u5fd7 = 1\uff0c\u8868\u793a\u65e0\u8f93\u5165</li> </ol> <pre><code>;\u67e5\u8be2\u952e\u76d8\u7f13\u51b2\u533a\nMOV AH, 01H \nINT 16H\n</code></pre>"},{"location":"notes/assembly/assembly/#0eh","title":"\u529f\u80fd\u53f70EH:\u8f93\u51fa\u4e00\u4e2a\u5b57\u7b26","text":"<p>\u5c06\u6570\u636e\u653e\u5230AL</p> <pre><code>;BIOS \u529f\u80fd\u8c03\u7528\u663e\u793a\u5b57\u7b26\nMOV AH, 0EH\nMOV AL, 'F'\nINT 10H\n</code></pre>"},{"location":"notes/assembly/assembly/#dos","title":"DOS\u529f\u80fd\u8c03\u7528","text":"<p>DOS\u529f\u80fd\u8c03\u7528\u53ef\u4ee5\u5b9e\u73b0\u7b80\u5355\u7684\u8f93\u5165\u8f93\u51fa\uff1a</p> <p>DOS\u529f\u80fd\u8c03\u7528\u6307\u7684\u662f\u5728MS-DOS\uff08Microsoft Disk Operating System\uff09\u6216\u5176\u4ed6DOS\u64cd\u4f5c\u7cfb\u7edf\u4e0b\uff0c\u901a\u8fc7\u4e2d\u65ad\uff08interrupt\uff09\u6765\u8bbf\u95ee\u64cd\u4f5c\u7cfb\u7edf\u63d0\u4f9b\u7684\u670d\u52a1\u548c\u529f\u80fd\u7684\u4e00\u79cd\u65b9\u5f0f\u3002</p> <pre><code>;\u6846\u67b6\nMOV AH, &lt;\u8c03\u7528\u53f7&gt;\nINT 21H\n</code></pre>"},{"location":"notes/assembly/assembly/#1","title":"1\u53f7\u6307\u4ee4\uff1a\u5355\u4e2a\u5b57\u7b26\u8f93\u5165","text":"<p>\u7b49\u5f85\u952e\u5165\u4e00\u4e2a\u5b57\u7b26,\u6709\u56de\u663e,\u54cd\u5e94Ctrl_C\uff0c\u5185\u5bb9\u4f1a\u4fdd\u5b58\u5728AL</p> <pre><code>MOV AH,1\nINT 21H\n</code></pre>"},{"location":"notes/assembly/assembly/#10","title":"10\u53f7\u6307\u4ee4\uff1a\u4ece\u952e\u76d8\u8f93\u5165\u5b57\u7b26\u4e32","text":"<p>\u8fd9\u4e2a\u6307\u4ee4\u9700\u8981\u8f93\u5165\u4e00\u4e2astruct\uff0cstruct\u7684\u7b2c\u4e00\u4e2a\u5b57\u8282\u9700\u8981\u7531\u7528\u6237\u8f93\u5165\u5b57\u7b26\u4e32\u7684\u6700\u5927\u957f\u5ea6\uff0c\u7b2c\u4e8c\u4e2a\u5b57\u8282\u7531\u7cfb\u7edf\u5199\u5165\uff0c\u4e4b\u540e\u7559\u51fa\u53ef\u4ee5\u5bb9\u7eb3\u6700\u5927\u5b57\u7b26\u4e32\u7684\u7f13\u51b2\u533a\uff0c\u53ea\u9700\u8981\u628a\u6574\u4e2astruct\u7684\u5730\u5740\u4f20\u5165DX\u5c31\u53ef\u4ee5\u3002</p> <pre><code>DATA SEGMENT\n        ; \u7b2c\u4e00\u79cd\u58f0\u660e\u65b9\u6cd5\n\u00a0 \u00a0 MAXLENGTH \u00a0 \u00a0DB 100 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ;\u4e00\u4e2a\u5b57\u8282\uff0c\u7528\u5b83\u5b58\u6700\u5927\u7684\u957f\u5ea6\n\u00a0 \u00a0 ACTUALLENGTH DB ? \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ;\u4e00\u4e2a\u5b57\u8282\uff0c\u7528\u5b83\u5b58\u5b9e\u9645\u7684\u957f\u5ea6\uff0c\u5728\u6307\u4ee4\u6267\u884c\u540e\u4f1a\u88ab\u586b\u5199\n\u00a0 \u00a0 STRING \u00a0 \u00a0 \u00a0 DB 100 DUP(?) \u00a0 \u00a0;\u7528\u6765\u5b58\u5b57\u7b26\u4e32\n\u00a0 \u00a0 \n\u00a0 \u00a0 ; \u7b2c\u4e8c\u79cd\u58f0\u660e\u7684\u65b9\u6cd5\n\u00a0 \u00a0 BUF DB 100\n\u00a0 \u00a0     DB \uff1f\n\u00a0 \u00a0     DB 100 DUP(?)\nDATA ENDS\n\nSTACK SEGMENT\nSTACK ENDS\n\nCODE SEGMENT\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0ASSUME DS:DATA,SS:STACK,CS:CODE\n\u00a0 \u00a0 MAIN:\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0AX,DATA\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0DS,AX\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0DX,OFFSET MAXLENGTH \u00a0 \u00a0 \u00a0 \u00a0 ;\u628a\u9700\u8981\u7528\u5230\u7684\u5185\u5b58\u5757\uff08\u4e09\u4e2a\u90e8\u5206\uff09\u7684\u5730\u5740\u5b58\u5165DX\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0AH,10\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0INT \u00a0 \u00a021H\n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0AH,4CH\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0INT \u00a0 \u00a021H\nCODE ENDS\nEND MAIN\n</code></pre>"},{"location":"notes/assembly/assembly/#2","title":"2\u53f7\u8c03\u7528\uff1a\u5355\u4e2a\u5b57\u7b26\u8f93\u51fa","text":"<p>\u663e\u793a\u4e00\u4e2a\u5b57\u7b26,\u54cd\u5e94Ctrl_C\uff0c\u6570\u636e\u4f20\u5165DL</p> <pre><code>MOV DL,'A'\nMOV AH,2\nINT 21H\n</code></pre>"},{"location":"notes/assembly/assembly/#9","title":"9\u53f7\u8c03\u7528\uff1a\u5b57\u7b26\u4e32\u8f93\u51fa","text":"<p>\u4f60\u7684\u5b57\u7b26\u4e32\u5fc5\u987b\u8981\u4ee5'$'\u7ed3\u5c3e\uff01\u4e0d\u7136\u8f93\u51fa\u4e0d\u4f1a\u7ed3\u675f\uff01\uff08\u7c7b\u4f3c\u4e8e'\\0'\uff0c'$'\u662f\u4e00\u79cd\u5b57\u7b26\u4e32\u7684\u7ec8\u6b62\u7b26\uff09 \u7a0b\u5e8f\u4f1a\u5c06DS:DX\u5730\u5740\u5f00\u59cb\u8f93\u51fa\u5b57\u7b26\u5230'$'\u7ed3\u5c3e</p> <pre><code>DATA SEGMENT\n\u00a0 \u00a0 STRING \u00a0 \u00a0 \u00a0 DB 'hello world', 0AH, 24H      ; 0AH\u6362\u884c\u7b26\uff0c24H'$'\nDATA ENDS\n\nSTACK SEGMENT\nSTACK ENDS\n\nCODE SEGMENT\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0ASSUME DS:DATA,SS:STACK,CS:CODE\n\u00a0 \u00a0 MAIN:\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0AX,DATA\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0DS,AX\n\n                 MOV    DX, OFFSET STRING\n                 MOV    AH, 9\n                 INT    21H \n\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0MOV \u00a0 \u00a0AH,4CH\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0INT \u00a0 \u00a021H\nCODE ENDS\nEND MAIN\n</code></pre>"},{"location":"notes/assembly/assembly/#_20","title":"\u5b50\u7a0b\u5e8f\u7ed3\u6784","text":"<pre><code>MAIN:\nCALL NM\n\nNM PROC\n...\nRET\nNM ENDP\n...\nEND MAIN\n</code></pre> <pre><code>; e.g.\nCODE SEGMENT\n       ASSUME DS:DATA, SS:STACK, CS:CODE\n  MAIN:\n       mov    ax, DATA\n       mov    ds, ax\n\n       call   fun\n\nfun PROC\n       mov    ax, 0FFFFH\n       ret\nfun ENDP\n\n       MOV    AH, 4CH\n       INT    21H\nCODE ENDS\nEND MAIN\n</code></pre>"},{"location":"notes/assembly/weiji/","title":"\u5fae\u673a\u539f\u7406\u548c\u63a5\u53e3\u6280\u672f","text":""},{"location":"notes/assembly/weiji/#io","title":"IO","text":"<ul> <li> <p>\u7aef\u53e3\u7684\u5206\u7c7b\uff1a\u6570\u636e\u7aef\u53e3\u3001\u63a7\u5236\u7aef\u53e3\u3001\u72b6\u6001\u7aef\u53e3</p> </li> <li> <p>\u76f4\u63a5\u5bfb\u5740 I/O \u6307\u4ee4\uff0c\u7aef\u53e3\u67098\u4f4d\uff0c\u53ef\u5bfb\u5740256\u4e2a\u7aef\u53e3</p> </li> </ul> <pre><code>IN  AL, 80H          ; \u5c0680H\u7aef\u53e3\u6570\u636e\u8bfb\u5230AL\nIN  AX, 80H          ; \u5c0680H\u6570\u636e\u5199\u5165AL\uff0c81H\u6570\u636e\u5199\u5165AH\nIN  EAX, 80H         ; \u7c7b\u4f3c\u4e0a\u9762\u7684\n\nOUT 80H, AL          ; \u5c06AL\u6570\u636e\u5199\u516580H\u7aef\u53e3\nOUT 80H, AX          ; \u5c06AL\u6570\u636e\u5199\u516580H\u7aef\u53e3\uff0c\u5c06AH\u6570\u636e\u5199\u516581H\u7aef\u53e3\nOUT 80H, EAX         ; \u7c7b\u4f3c\u4e0a\u9762\u7684\n</code></pre> <ul> <li>\u95f4\u63a5\u5bfb\u5740I/O \u6307\u4ee4\uff0c\u5f53\u7aef\u53e3\u5927\u4e8e8\u4f4d</li> </ul> <pre><code>MOV DX, 180H          \nIN  AL, DX           ; \u5c06180H\u7aef\u53e3\u6570\u636e\u5199\u5165AL\n\nMOV DX, 222H         \nOUT DX, AL           ; \u5c06AL\u6570\u636e\u5199\u5165222H\u7aef\u53e3\n</code></pre>"},{"location":"notes/assembly/weiji/#io_1","title":"\u5fae\u673a\u7cfb\u7edf\u4e0e I/O \u7aef\u53e3\u7684\u4fe1\u606f\u4ea4\u6362\u7684\u56db\u79cd\u65b9\u5f0f","text":""},{"location":"notes/assembly/weiji/#_2","title":"\u65e0\u6761\u4ef6\u4f20\u9001\u65b9\u5f0f","text":"<p>\u65e0\u6761\u4ef6\u4f20\u9001\u65b9\u5f0f\uff1a\u5728\u5916\u8bbe\u6570\u636e\u51c6\u5907\u597d\u65f6\u6267\u884cIN\u6307\u4ee4\uff0c\u6216\u8005\u8f93\u51fa\u8bbe\u5907\u7a7a\u95f2\u65f6\u6267\u884cOUT\u6307\u4ee4</p>"},{"location":"notes/assembly/weiji/#_3","title":"\u67e5\u8be2\u65b9\u5f0f","text":"<ul> <li> <p>\u8f93\u5165\uff1a\u4ece\u72b6\u6001\u53e3\u8bfb\u53d6\u72b6\u6001\u4fe1\u606f\uff0c\u5982\u679c\u6570\u636e\u51c6\u5907\u597d\u5c31\u6267\u884cIN\uff0c\u5426\u5219\u5faa\u73af\u4ece\u72b6\u6001\u53e3\u8bfb\u53d6\u72b6\u6001\u4fe1\u606f <pre><code>; \u8bbe\u72b6\u6001\u53e3\u5730\u5740=200H\uff0c  \u6570\u636e\u53e3\u5730\u5740=201H\n\nRSCAN:MOV    DX, 200H\n        IN     AL, DX\n      TEST   AL, 80H      ;\u5224\u65adD7\u4f4d\u662f\u5426=1\uff0c\u5982\u679c\u662f1\uff0c\u6570\u636e\u51c6\u5907\u5b8c\u6bd5\uff0c\u4e0d\u8df3\u8f6c\n      JZ     RSCAN        \n      MOV    DX, 201H\n      IN     AL, DX\n</code></pre></p> </li> <li> <p>\u8f93\u51fa\uff1a\u4ece\u72b6\u6001\u53e3\u8bfb\u53d6\u72b6\u6001\u4fe1\u606f\uff0c\u5982\u679c\u5916\u8bbe\u7a7a\u95f2\u5c31\u6267\u884cOUT\uff0c\u5426\u5219\u5faa\u73af\u4ece\u72b6\u6001\u53e3\u8bfb\u53d6\u72b6\u6001\u4fe1\u606f\uff0c\u6570\u636e\u53e3\u548c\u72b6\u6001\u53e3\u5171\u7528\u4e00\u4e2a\u7aef\u53e3 <pre><code>; \u8bbe\u72b6\u6001\u53e3\u5730\u5740=200H=\u6570\u636e\u53e3\u5730\u5740\n\nWSCAN:MOV    DX, 200H\n        IN     AL, DX\n      TEST   AL, 01H      ;\u5224\u65adD0\u4f4d\u662f\u5426=0\uff0c\u5982\u679c\u662f0\uff0c\u8bbe\u5907\u7a7a\u95f2\uff0c\u4e0d\u8df3\u8f6c\n      JNZ    WSCAN        \n      MOV    DX, 200H\n      MOV    AL, 44H\n      OUT    DX, AL\n</code></pre></p> </li> </ul>"},{"location":"notes/assembly/weiji/#_4","title":"\u4e2d\u65ad\u65b9\u5f0f","text":"<ul> <li>CLI \u5173\u4e2d\u65ad</li> <li> <p>STI \u5f00\u4e2d\u65ad</p> </li> <li> <p>IRET \u4e2d\u65ad\u8fd4\u56de\uff0c\u5728\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u7684\u5c3e\u90e8</p> </li> <li>INT n \u8f6f\u4ef6\u4e2d\u65ad\u6307\u4ee4</li> <li>INTO \u4e2d\u65ad\u6ea2\u51fa\u6307\u4ee4</li> </ul>"},{"location":"notes/assembly/weiji/#_5","title":"\u4e2d\u65ad\u7684\u5206\u7c7b","text":"<ol> <li>\u5916\u90e8\u4e2d\u65ad\uff1a\u7531CPU\u4ee5\u5916\u7684\u8bbe\u5907\u53d1\u51fa\uff0c\u5e76\u7531 CPU\u7684\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7\u5f15\u811a\u8f93\u5165\u6240\u5f15\u53d1\u7684\u4e2d\u65ad\u79f0\u4e3a\u5916\u90e8\u4e2d\u65ad\uff0c\u4e5f\u79f0\u4e3a\u786c\u4ef6\u4e2d\u65ad\u3002 80X86 CPU\u67092\u4e2a\u5f15\u811a(INTR\u548cNMI)\u53ef\u4ee5\u63a5\u6536\u5916\u90e8\u7684\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7\u3002\u7531\u8f93\u5165\u5230INTR\u5f15\u811a\u7684\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7\u5f15\u53d1\u7684\u4e2d\u65ad\u79f0\u4e3a\u53ef\u5c4f\u853d\u786c\u4ef6\u4e2d\u65ad\u3002\u7531\u8f93\u5165\u5230NMI\u5f15\u811a\u7684\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7\u5f15\u53d1\u7684\u4e2d\u65ad\u79f0\u4e3a\u975e\u5c4f\u853d\u786c\u4ef6\u4e2d\u65ad\u3002</li> <li>\u7531CPU\u786c\u4ef6\u6545\u969c\u6216\u7a0b\u5e8f\u6267\u884c\u4e2d\u7684\u4e8b\u4ef6\u6240\u5f15\u53d1\u7684\u4e2d\u65ad\u79f0\u4e3a\u5185\u90e8\u4e2d\u65ad\u3002\u5185\u90e8\u4e2d\u65ad\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5206\u4e3a\u8f6f\u4ef6\u4e2d\u65ad\u548c\u5f02\u5e38\u3002\u6267\u884c\u6709\u5b9a\u4e49\u7684INT n\u6307\u4ee4\u800c\u5f15\u53d1\u7684\u4e2d\u65ad,\u79f0\u4e3a\u8f6f\u4ef6\u4e2d\u65ad\u3002\u8f6f\u4ef6\u4e2d\u65ad\u53ef\u5206\u4e3aBIOS\u4e2d\u65ad\u3001DOS\u4e2d\u65ad\u3002\u8f6f\u4ef6\u4e2d\u65ad\u4e0d\u53ef\u5c4f\u853d\u3002\u7531\u4e8eCPU\u672c\u8eab\u6545\u969c\u3001\u7a0b\u5e8f\u6545\u969c\u7b49\u5f15\u53d1\u7684\u4e2d\u65ad\uff0c\u79f0\u4e3a\u5f02\u5e38\u3002</li> </ol>"},{"location":"notes/assembly/weiji/#_6","title":"\u4e2d\u65ad\u5411\u91cf","text":"<p>\u4e2d\u65ad\u5411\u91cf\u662f\u5b9e\u6a21\u5f0f\u4e0b\uff0c\u4e2d\u65ad\u670d\u52a1\u5b50\u7a0b\u5e8f\u7684\u5165\u53e3\u5730\u5740</p> <p>\u5b83\u75312\u90e8\u5206\u7ec4\u6210:\uff08\u6309\u987a\u5e8f\uff09</p> <ol> <li> <p>\u670d\u52a1\u7a0b\u5e8f\u5165\u53e3\u7684\u504f\u79fb\u5730\u5740\uff082\u4e2a\u5b57\u8282\uff09</p> </li> <li> <p>\u670d\u52a1\u7a0b\u5e8f\u6240\u5728\u4ee3\u7801\u6bb5\u7684\u6bb5\u57fa\u5740\uff082\u4e2a\u5b57\u8282\uff09</p> </li> </ol>"},{"location":"notes/assembly/weiji/#_7","title":"\u4e2d\u65ad\u5411\u91cf\u8868","text":"<p>\u4e2d\u65ad\u7c7b\u578b\u7801\u901a\u8fc7\u4e00\u4e2a\u5730\u5740\u6307\u9488\u8868\u4e0e\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u7684\u5165\u53e3\u5730\u5740\u76f8\u8054\u7cfb\uff1a     </p> <p>\u5b9e\u6a21\u5f0f\u4e0b\uff1a\u8be5\u8868\u79f0\u4e3a\u4e2d\u65ad\u5411\u91cf\u8868\uff1b</p> <p>\u4fdd\u62a4\u6a21\u5f0f\u4e0b\uff1a\u8be5\u8868\u79f0\u4e3a\u4e2d\u65ad\u63cf\u8ff0\u7b26\u8868\u3002 </p> <p>\u4e2d\u65ad\u5411\u91cf\u8868\u5728RAM\u7684\uff0800000H \uff5e 003FFH)\u5730\u5740\uff0c\u51711K\u5355\u5143</p> <ul> <li>\u53ef\u4ee5\u4f7f\u7528DOS\u768435H\u83b7\u53d6\u4e2d\u65ad\u5411\u91cf</li> <li>input: AH = 35H, AL = \u4e2d\u65ad\u53f7</li> <li>output: ES: BX = \u4e2d\u65ad\u5411\u91cf</li> <li>\u53ef\u4ee5\u4f7f\u7528DOS\u768425H\u4fee\u6539\u4e2d\u65ad\u5411\u91cf</li> <li>input: AH = 35H, AL = \u4e2d\u65ad\u53f7, DS = \u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u6240\u5728\u7684\u6bb5\u57fa\u5740, DX = \u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u6240\u5728\u7684\u6bb5\u504f\u79fb\u5730\u5740</li> </ul>"},{"location":"notes/assembly/weiji/#8259a","title":"8259A","text":"<ul> <li> <p>IRR\u662f\u4e2d\u65ad\u8bf7\u6c42\u63a7\u5236\u5668\u3002\u5b83\u4fdd\u5b58\u4eceIR0-IR7\u6765\u7684\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7\u3002\u67d0\u4e00\u4f4d\u67091\u5c31\u8868\u793a\u76f8\u5e94\u5f15\u811a\u4e0a\u6709\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7\u3002\u4e2d\u65ad\u54cd\u5e94\u540e\uff0c\u8be5IR\u8f93\u5165\u7ebf\u4e0a\u7684\u8bf7\u6c42\u4fe1\u53f7\u5e94\u8be5\u64a4\u9500\u3002</p> </li> <li> <p>ISR\u662f\u4e2d\u65ad\u670d\u52a1\u5bc4\u5b58\u5668\u3002\u5b83\u7528\u4e8e\u4fdd\u5b58\u6b63\u5728\u670d\u52a1\u7684\u4e2d\u65ad\u6e90\u3002\u5728\u4e2d\u65ad\u54cd\u5e94\u65f6\uff0c\u5224\u4f18\u7535\u8def\u628a\u53d1\u51fa\u4e2d\u65ad\u8bf7\u6c42\u7684\u4e2d\u65ad\u6e90\u4e2d\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u4e2d\u65ad\u6e90\u6240\u5bf9\u5e94\u7684\u4f4d\u8bbe\u7f6e\u4e3a1\uff0c\u8868\u793a\u8be5\u4e2d\u65ad\u6e90\u6b63\u5728\u5904\u7406\u4e2d\u3002ISR\u67d0\u4e00\u4f4d\u7f6e1\u8bfe\u963b\u6b62\u4e0e\u5b83\u540c\u7ea7\u548c\u66f4\u4f4e\u4f18\u5148\u7ea7\u7684\u8bf7\u6c42\u88ab\u54cd\u5e94\uff0c\u4f46\u5141\u8bb8\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u8bf7\u6c42\u88ab\u54cd\u5e94\u3002</p> </li> <li> <p>IMR\u662f\u4e2d\u65ad\u5c4f\u853d\u5bc4\u5b58\u5668\u3002\u5b83\u7528\u4e8e\u5b58\u653e\u4e2d\u65ad\u63a7\u5236\u5b57\uff0c\u5176\u4e2d\u4e3a1\u7684\u4f4d\u8868\u793a\u5bf9\u5e94\u7684\u4e2d\u65ad\u8bf7\u6c42\u8f93\u5165\u5c06\u88ab\u5c4f\u853d\u3002</p> </li> </ul> <p>\u786c\u4ef6\u4e2d\u65ad\u6e90\u548c\u7ec8\u7aef\u7c7b\u578b\u5bf9\u7167\u8868</p> \u4e3b8259 \u4e2d\u65ad\u6e90 \u4e2d\u65ad\u7c7b\u578b \u4ece8259 \u4e2d\u65ad\u6e90 \u4e2d\u65ad\u7c7b\u578b IR0 \u65e5\u65f6\u949f 08H IR0 \u5b9e\u65f6\u65f6\u949f 70H IR1 \u952e\u76d8 09H IR1 \u7528\u6237\u4e2d\u65ad 71H\u6539\u54110AH IR2 \u4ece8259 IR2 \u4fdd\u7559 72H IR3 \u8f85\u4e32\u53e3 0BH IR3 \u4fdd\u7559 73H IR4 \u4e3b\u4e32\u53e3 0CH IR4 \u4fdd\u7559 74H IR5 \u5e76\u884c\u53e32 0DH IR5 \u534f\u5904\u7406\u5668 75H IR6 \u8f6f\u76d8 0EH IR6 \u786c\u76d8 76H IR7 \u5e76\u884c\u53e31 0FH IR7 \u4fdd\u7559 77H <p>\u7cfb\u7edf\u5206\u914d\u7ed9\u4e3b\u4ece8259A\u7684\u53e3\u5730\u5740</p> \u82af\u7247 \u5947\u5730\u5740\uff08\u4e2d\u65ad\u5c4f\u853d\u5bc4\u5b58\u5668\u53e3\uff09 \u5076\u5730\u5740\uff08\u63a5\u6536\u4e2d\u65ad\u7ed3\u675f\u547d\u4ee4\u53e3\uff09 \u4e3b8259A 21H 20H \u4ece8259A A1H A0H"},{"location":"notes/assembly/weiji/#_8","title":"\u65e5\u65f6\u949f\u4e2d\u65ad","text":"<p>\u4f8b\uff1a\u65e5\u65f6\u949f\u6e90\u662f8254 0#\u8ba1\u6570\u5668\uff0c\u6bcf55ms\u53d1\u51fa\u4e00\u6b21\u4e2d\u65ad\u8bf7\u6c42\uff0c\u8981\u6c42\u6bcf1s\u6253\u5370\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6253\u537010\u6b21\u7ec8\u6b62\u3002\\(55 \\times 18 = 990 \\approx  1000\\)</p> <ol> <li>\u6cd51\uff1a\u7f6e\u63621CH\u4e2d\u65ad\u5411\u91cf</li> </ol> <pre><code>.486\ndata segment use16\n    mesg   db 'helloworld', 0ah, '$'\n    icount db 18\n    count  db 10\n    old    dd ?\ndata ends\n\ncode segment use16\n           assume ds: data, cs: code\n    beg:   \n           mov    ax, data\n           mov    ds, ax\n\n    ; store and rewrite interrupt vector\n           cli\n           call   read\n           call   write\n           sti\n\n    ; main loop, if print str 10 times, go to reset\n    scan:  cmp    count, 0\n           jnz    scan\n\n           cli\n           call   reset\n           sti\n\n           mov    ah, 4ch\n           int    21h\n\n    ; interrupt server\nserver proc\n           pusha\n           push   ds\n           mov    ax, data\n           mov    ds, ax\n           dec    icount\n           jnz    exit\n           mov    icount, 18\n           dec    count\n           mov    ah, 9\n           mov    dx, offset mesg\n           int    21h\n    exit:  \n           pop    ds\n           popa\n           iret\nserver endp\n\n    ; read and store the old interrupt vector\nread proc\n           mov    ax, 351ch\n           int    21h\n           mov    word ptr old, bx\n           mov    word ptr old+2, es\n           ret\nread endp\n\n    ; write user defined interrupt server vector\nwrite proc\n           push   ds\n\n           mov    ax, seg server\n           mov    ds, ax\n           mov    dx, offset server\n\n           mov    ax, 251ch\n           int    21h\n\n           pop    ds\n           ret\nwrite endp\n\n; write back the former vector\nreset proc\n           push   ds\n           mov    dx, word ptr old\n           mov    ds, word ptr old+2\n           mov    ax, 251ch\n           int    21h\n           pop    ds\n           ret\nreset endp\n\ncode ends\nend beg\n</code></pre> <ol> <li>\u6cd52\uff1a\u7f6e\u636208H\u4e2d\u65ad\u5411\u91cf\uff0c\u76f8\u6bd4\u6cd51\uff0c\u6709\u4e09\u70b9\u4e0d\u540c</li> <li>\u6240\u6709\u7684DOS 25H\uff0c35H\u4e2d\u8c03\u7528\u7684\u63a5\u53e3\u6539\u4e3a08H</li> <li>\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u4e2d<code>mov ax, data</code>\u548c<code>mov ds ax</code> \u6ca1\u6709\u4e86</li> <li>\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u7684\u7ed3\u5c3e\u4e0d\u662f<code>iret</code>\u800c\u662f<code>jmp old</code></li> </ol>"},{"location":"notes/assembly/weiji/#_9","title":"\u7528\u6237\u4e2d\u65ad","text":"<p>\u4f8b\uff1a8254\u6bcf100ms\u53d1\u9001\u4e00\u6b21\u4e2d\u65ad\u8bf7\u6c42\uff0c\u8981\u6c42\u6bcf1\u79d2\u6253\u5370\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u76f4\u5230\u952e\u76d8\u6309\u4e0b\u7ec8\u6b62\u3002</p> <pre><code>.486\ndata segment use16\n    mesg   db 'helloworld', 0ah, '$'\n    icount db 10\n    old    dd ?\ndata ends\n\ncode segment use16\n           assume ds: data, cs: code\n    beg:   \n           mov    ax, data\n           mov    ds, ax\n\n    ; store and rewrite interrupt vector\n           cli\n           call   read\n           call   write\n           call   i8259a\n           sti\n\n    ; main loop, if print str 10 times, go to reset\n    scan:  mov    ah, 1\n           int    16h\n           jz     scan\n\n           cli\n           call   reset\n           sti\n\n           mov    ah, 4ch\n           int    21h\n\n    ; interrupt server\nserver proc\n           pusha\n           push   ds\n           mov    ax, data\n           mov    ds, ax\n           dec    icount\n           jnz    exit\n           mov    icount, 10\n           mov    ah, 9\n           mov    dx, offset mesg\n           int    21h\n    exit:  \n    ; sent end message to 8259a\n           mov    al, 20h\n           out    20h, al\n\n           pop    ds\n           popa\n           iret\nserver endp\n\n    ; read and store the old interrupt vector\nread proc\n           mov    ax, 350ah\n           int    21h\n           mov    word ptr old, bx\n           mov    word ptr old+2, es\n           ret\nread endp\n\n    ; write user defined interrupt server vector\nwrite proc\n           push   ds\n\n           mov    ax, seg server\n           mov    ds, ax\n           mov    dx, offset server\n\n           mov    ax, 250ah\n           int    21h\n\n           pop    ds\n           ret\nwrite endp\n\ni8259a proc\n    ; enable subordinate 8259\n           in     al, 0a1h\n           mov    al, 11111101B\n           out    0a1h, al\n    ; enable principal 8259\n           in     al, 21h\n           mov    al, 11111011B\n           out    21h, al\n           ret\ni8259a endp\n\n    ; write back the former vector\nreset proc\n           push   ds\n           mov    dx, word ptr old\n           mov    ds, word ptr old+2\n           mov    ax, 250ah\n           int    21h\n           pop    ds\n           ret\nreset endp\n\ncode ends\nend beg\n</code></pre>"},{"location":"notes/assembly/weiji/#dma","title":"DMA\u65b9\u5f0f","text":"<p>\u7279\u70b9\uff1a</p> <ul> <li>\u7528\u786c\u4ef6\u5b9e\u73b0\u5728\u5916\u8bbe\u4e0e\u5185\u5b58\u95f4\u76f4\u63a5\u8fdb\u884c\u6570\u636e\u4ea4\u6362\uff0c\u800c\u4e0d\u901a\u8fc7CPU</li> <li>\u6570\u636e\u4f20\u9001\u901f\u5ea6\u7684\u4e0a\u9650\u5c31\u53d6\u51b3\u4e8e\u5b58\u50a8\u5668\u7684\u5de5\u4f5c\u901f\u5ea6</li> <li>\u901f\u5ea6\u5feb</li> </ul>"},{"location":"notes/assembly/weiji/#_10","title":"\u4e32\u884c\u901a\u4fe1","text":"<p>\u4e32\u884c\u901a\u4fe1\uff1a\u4e00\u6761\u9053\uff0c\u4e00\u4e2a\u4e00\u4e2a\u8d70\uff1b\u5e76\u884c\u901a\u4fe1\uff1a\u591a\u6761\u9053\uff0c\u5168\u90e8\u4e00\u8d77\u8d70</p>"},{"location":"notes/assembly/weiji/#8250","title":"8250\u5185\u90e8\u5bc4\u5b58\u5668","text":"<ul> <li> <p>\u53d1\u9001\u4fdd\u6301\u5bc4\u5b58\u5668(3F8H/2F8H)</p> </li> <li> <p>\u8be5\u5bc4\u5b58\u5668\u4fdd\u5b58CPU\u4f20\u9001\u6765\u7684\u5e76\u884c\u6570\u636e\uff0c\u5e76\u8f6c\u79fb\u81f3\u53d1\u9001\u79fb\u4f4d\u5bc4\u5b58\u5668</p> </li> <li> <p>\u63a5\u6536\u7f13\u51b2\u5bc4\u5b58\u5668(3F8H/2F8H)</p> </li> <li> <p>\u63a5\u6536\u79fb\u4f4d\u5bc4\u5b58\u5668\uff0c\u53bb\u6389\u8d77\u59cb\u4f4d\uff0c\u6821\u9a8c\u4f4d\u548c\u505c\u6b62\u4f4d\uff0c\u8f6c\u6362\u6210\u5e76\u884c\u6570\u636e\uff0c\u8f6c\u6362\u540e\u7684\u5e76\u884c\u6570\u636e\u5b58\u5165\u63a5\u6536\u7f13\u51b2\u5bc4\u5b58\u5668\uff0c\u7b49\u5f85CPU\u63a5\u6536\u3002</p> </li> <li> <p>\u901a\u4fe1\u7ebf\u72b6\u6001\u5bc4\u5b58\u5668 (3FDH/2FDH)</p> </li> <li> <p>\u5bc4\u5b58\u901a\u4fe1\u7ebf\u72b6\u6001</p> </li> <li> <p>\u4e2d\u65ad\u5141\u8bb8\u5bc4\u5b58\u5668(3F9H/2F9H)</p> </li> <li> <p>\u4e2d\u65ad\u8bc6\u522b\u5bc4\u5b58\u5668(3FAH/2FAH)</p> </li> <li> <p>\u7531\u4e8e8250\u4ec5\u80fd\u5411CPU\u53d1\u51fa\u4e00\u4e2a\u603b\u7684\u4e2d\u65ad\u8bf7\u6c42\u4fe1\u53f7,\u4e3a\u4e86\u8bc6\u522b\u662f\u54ea\u4e00\u4e2a\u4e2d\u65ad\u6e90\u5f15\u8d77\u7684\u4e2d\u65ad\uff0c\u5e94\u5728\u8f6c\u5165\u4e2d\u65ad\u670d\u52a1\u7a0b\u5e8f\u4e4b\u540e\uff0c\u8bfb\u53d6\u4e2d\u65ad\u8bc6\u522b\u5bc4\u5b58\u5668\u7684\u5185\u5bb9\u8fdb\u884c\u5224\u65ad\uff0c\u7136\u540e\u518d\u8f6c\u5165\u76f8\u5e94\u7684\u5904\u7406\u7a0b\u5e8f\u3002</p> </li> <li> <p>MODEM\u63a7\u5236\u5bc4\u5b58\u5668(3FCH/2FCH)</p> </li> <li> <p>\u57288250\u7528\u4e2d\u65ad\u65b9\u5f0f\u4e0eCPU\u4ea4\u6362\u4fe1\u606f\u65f6\uff0cD3\u5e94=1</p> </li> <li> <p>\u57288250\u7528\u67e5\u8be2\u65b9\u5f0f\u4e0eCPU\u4ea4\u6362\u4fe1\u606f\u65f6\uff0cD3\u5e94=0</p> </li> <li> <p>\u9664\u6570\u5bc4\u5b58\u5668\uff08\u9ad88\u4f4d3F9H/2F9H,\u4f4e8\u4f4d3F8H/2F8H)</p> </li> <li> <p>\u5b58\u653e\u521d\u59cb\u5316\u65f6\u7f16\u7a0b\u65f6\u5199\u5165\u7684\u5206\u9891\u7cfb\u6570</p> </li> <li> \\[     \u5206\u9891\u7cfb\u6570 = \\frac{1.8432M}{16 \\times \u6ce2\u7279\u7387} = \\frac{64^2\\times450}{16 \\times \u6ce2\u7279\u7387}     \\] </li> <li> <p>\u901a\u4fe1\u7ebf\u63a7\u5236\u5bc4\u5b58\u5668(3FBH/2FBH)</p> </li> <li> <p>\u8be5\u5bc4\u5b58\u5668\u4e3b\u8981\u7528\u4e8e\u6307\u5b9a\u4e32\u884c\u5f02\u6b65\u901a\u4fe1\u7684\u6570\u636e\u683c\u5f0f</p> </li> </ul>"},{"location":"notes/assembly/weiji/#8250_1","title":"8250\u521d\u59cb\u5316","text":"<p>\u7528\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7684\u90e8\u5206</p> <ol> <li>\u4f7f\u7528\u4e3b/\u8f85\u4e32\u53e3</li> <li> <p>\u6ce2\u7279\u7387 -&gt; \u9664\u6570\u5bc4\u5b58\u5668\uff08\u9ad88\u4f4d3F9H/2F9H,\u4f4e8\u4f4d3F8H/2F8H)</p> </li> <li> <p>\u5c064byte\u5206\u9891\u7cfb\u6570\u5206\u9ad8\u4f4e\u4f4d\u5148\u540e\u5199\u5165\u9664\u6570\u5bc4\u5b58\u5668</p> </li> <li> <p></p> </li> <li> <p>\u4e32\u884c\u901a\u4fe1\u7684\u683c\u5f0f -&gt; \u901a\u4fe1\u7ebf\u63a7\u5236\u5bc4\u5b58\u5668(3FBH/2FBH)</p> </li> <li> <p>\u5c06\u63a7\u5236\u5b57\u5199\u5165\u901a\u4fe1\u7ebf\u63a7\u5236\u5bc4\u5b58\u5668</p> </li> <li> <p>\u8bbe\u7f6e\u4e2d\u65ad\u5141\u8bb8 -&gt; \u4e2d\u65ad\u5141\u8bb8\u5bc4\u5b58\u5668(3F9H/2F9H)</p> </li> <li> <p>\u5c06\u4e2d\u65ad\u5141\u8bb8\u4f4d\u5199\u5165\u4e2d\u65ad\u5141\u8bb8\u5bc4\u5b58\u5668\uff0cD0\u662f\u63a5\u6536\u4e2d\u65ad\u4f7f\u80fd\uff0cD1\u662f\u53d1\u9001\u4e2d\u65ad\u4f7f\u80fd</p> </li> <li> <p>\u662f\u5426\u4f7f\u7528\u4e2d\u65ad&amp;\u662f\u5426\u81ea\u53d1\u6536 -&gt; MODEM\u63a7\u5236\u5bc4\u5b58\u5668(3FCH/2FCH)</p> </li> <li> <p>\u5c06MODEM\u63a7\u5236\u5b57\u5199\u5165MODEM\u63a7\u5236\u5bc4\u5b58\u5668\uff0c\u5982\u679c\u4f7f\u7528\u4e2d\u65ad\u65b9\u5f0f\uff0cD3\u7f6e1\uff0c\u5982\u679c\u81ea\u5faa\u73af\uff0cD4\u7f6e1</p> </li> <li> <p>\u6b63\u5e38\u901a\u4fe1\uff0c\u4e0d\u4e2d\u65ad\uff1aMODEM\u63a7\u5236\u5b57 = 0000 0000 B</p> </li> <li>\u6b63\u5e38\u901a\u4fe1\uff0c\u4f1a\u4e2d\u65ad\uff1aMODEM\u63a7\u5236\u5b57 = 0000 1000 B</li> <li>\u81ea\u53d1\u81ea\u6536\uff0c\u4e0d\u4e2d\u65ad\uff1aMODEM\u63a7\u5236\u5b57 = 0001 0000 B</li> <li>\u81ea\u53d1\u81ea\u6536\uff0c\u4f1a\u4e2d\u65ad\uff1aMODEM\u63a7\u5236\u5b57 = 0001 1000 B</li> </ol> <p>\u57fa\u672c\u683c\u5f0f(\u4e3b\u4e32\u53e3)</p> <pre><code>I8250 PROC\n    ; \u5bfb\u5740\u4f4d\u7f6e1\uff0c\u901a\u4fe1\u7ebf\u63a7\u5236\u5bc4\u5b58\u5668\n           MOV    DX, 3FBH\n           MOV    AL, 80H\n           OUT    DX, AL\n    ; \u7f6e\u5206\u9891\u7cfb\u6570\uff0c\u5148\u9ad88\u4f4d\u540e\u4f4e8\u4f4d\n           MOV    DX, 3F9H\n           MOV    AL, \u5206\u9891\u7cfb\u6570\u9ad8\u516b\u4f4d\n           OUT    DX, AL\n           MOV    DX, 3F8H\n           MOV    AL, \u5206\u9891\u7cfb\u6570\u4f4e\u516b\u4f4d\n           OUT    DX, AL\n    ; \u5b9a\u4e49\u6570\u636e\u683c\u5f0f\uff0c\u901a\u4fe1\u7ebf\u63a7\u5236\u5bc4\u5b58\u5668\n           MOV    DX, 3FBH\n           MOV    AL, \u6570\u636e\u683c\u5f0f\u5b9a\u4e49\n           OUT    DX, AL\n    ; \u4e2d\u65ad\u5141\u8bb8\u5bc4\u5b58\u5668\n           MOV    DX, 3F9H\n           MOV    AL, \u4e2d\u65ad\u5141\u8bb8\u4f4d\n           OUT    DX, AL\n    ; MODEM\u63a7\u5236\u5bc4\u5b58\u5668\n           MOV    DX, 3FCH\n           MOV    AL, \u4e2d\u65ad\u4f7f\u80fd\u5b9a\u4e49&amp;\u662f\u5426\u5faa\u73af\n           OUT    DX, AL\n           RET\nI8250 ENDP\n</code></pre>"},{"location":"notes/assembly/weiji/#_11","title":"\u67e5\u8be2\u65b9\u5f0f\u6536\u53d1","text":"<pre><code>; \u5229\u7528\u4e3b\u4e32\u53e3\u67e5\u8be2\u65b9\u5f0f\u53d1\u9001\u4e00\u4e2a'A'\nSCAN:  MOV    DX, 3FDH\n       IN     AL, DX\n       TEST   AL, 20H\n       JZ     SCAN\n       MOV    DX, 3F8H\n       MOV    AL, 'A'\n       OUT    DX, AL\n\n; \u5229\u7528\u4e3b\u4e32\u53e3\u67e5\u8be2\u65b9\u5f0f\u63a5\u6536\u4e00\u4e2a\u5b57\u7b26\nSCAN:  MOV    DX, 3FDH\n       IN     AL, DX\n       TEST   AL, 01H\n       JZ     SCAN\n       MOV    DX, 3F8H\n       IN     AL, DX\n</code></pre>"},{"location":"notes/assembly/weiji/#8254","title":"8254\u5b9a\u65f6/\u8ba1\u6570\u5668","text":""},{"location":"notes/assembly/weiji/#_12","title":"\u5e38\u7528\u5de5\u4f5c\u65b9\u5f0f","text":"<ul> <li>\u65b9\u5f0f2: \u5206\u9891\u5668(\u8109\u51b2\u53d1\u751f\u5668)</li> <li>\u65b9\u5f0f3: \u65b9\u6ce2\u53d1\u751f\u5668</li> </ul> <p>\u5176\u4ed6\u770b\u4f8b\u9898\u5c31\u884c\uff0c\u9644\u5f55\u4e2d\u6709\u8be6\u7ec6\u7684\u63a7\u5236\u5b57\u624b\u518c</p>"},{"location":"notes/assembly/weiji/#8255a","title":"\u5e76\u884c\u63a5\u53e38255A","text":""},{"location":"notes/assembly/weiji/#_13","title":"\u7ed3\u6784","text":"<ul> <li>24\u6839\u7aef\u53e3\u6570\u636e\u7ebf\u63a5\u5916\u8bbe </li> <li>PA7~PA0\u4e3aA\u53e3\u6570\u636e\u7ebf         </li> <li>PB7~PB0\u4e3aB\u53e3\u6570\u636e\u7ebf         </li> <li> <p>PC7~PC0\u4e3aC\u53e3\u6570\u636e\u7ebf</p> </li> <li> <p>8\u6839\u7cfb\u7edf\u6570\u636e\u7ebf\u63a5CPU</p> </li> <li> <p>D7~D0\uff0cCPU\u901a\u8fc7\u6570\u636e\u7ebf\u5199\u63a7\u5236\u5b57\u548c\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u63a5\u6536\u6570\u636e</p> </li> <li> <p>6\u6839\u8f93\u5165\u63a7\u5236\u7ebf  </p> </li> <li> <p>RESET\uff1a\u590d\u4f4d\u4fe1\u53f7\uff0cRESET=1\u65f6\uff0c8255\u5185\u90e8\u590d\u4f4d\uff0c\u6240\u6709\u5185\u90e8\u5bc4\u5b58\u5668\u6e05\u96f6\uff0cA\u3001B\u3001C\u4e09\u4e2a\u7aef\u53e3\u81ea\u52a8\u4e3a\u8f93\u5165\u53e3         </p> </li> <li> <p>CS\uff1a\u7247\u9009\u4fe1\u53f7\uff0cCS=0\u65f6\uff0c\u8be5\u82af\u7247\u88ab\u9009\u4e2d        </p> </li> <li> <p>RD\uff1a\u6765\u81eaCPU\u7684I/O\u8bfb\u547d\u4ee4        </p> </li> <li> <p>A1\u3001A0\uff1a\u901a\u5e38\u63a5CPU\u7684\u5730\u5740\u7ebfA1\u3001A0</p> </li> <li>WR\uff1a\u6765\u81eaCPU\u7684I/O\u5199\u547d\u4ee4         </li> </ul>"},{"location":"notes/assembly/weiji/#_14","title":"\u4e09\u79cd\u5de5\u4f5c\u65b9\u5f0f","text":"\u5de5\u4f5c\u65b9\u5f0f \u9002\u7528\u7aef\u53e3 \u65b9\u5f0f0\uff1a\u57fa\u672c\u578bIO A, B, C \u65b9\u5f0f1\uff1a\u9009\u901a\u578bIO A, B \u65b9\u5f0f2\uff1a\u53cc\u5411\u4f20\u8f93 A"},{"location":"notes/assembly/weiji/#0","title":"\u65b9\u5f0f0","text":"<ul> <li>\u8f93\u5165\uff1a\u6267\u884cIN\uff0c8255\u5c06\u6570\u636e\u4ece\u5bf9\u5e94\u7aef\u53e3\u4f20\u5230CPU</li> <li>\u8f93\u51fa\uff1a\u6267\u884cOUT\uff0cCPU\u5c06\u6570\u636e\u4f20\u7ed98255,8255\u5c06\u6570\u636e\u9501\u5b58\u5230\u5bf9\u5e94\u7aef\u53e3</li> </ul>"},{"location":"notes/assembly/weiji/#1","title":"\u65b9\u5f0f1","text":"<ul> <li> <p>\u8f93\u5165\uff1a</p> </li> <li> <p>\u8f93\u51fa\uff1a</p> </li> </ul> <p></p>"}]}